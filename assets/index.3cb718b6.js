const Ls=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};Ls();function Y(){}function hs(t){return t()}function mt(){return Object.create(null)}function oe(t){t.forEach(hs)}function js(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Es(t){return Object.keys(t).length===0}function ie(t){return t==null?"":t}function d(t,e){t.appendChild(e)}function E(t,e,s){t.insertBefore(e,s||null)}function I(t){t.parentNode.removeChild(t)}function Ae(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function _(t){return document.createElement(t)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function W(t){return document.createTextNode(t)}function S(){return W(" ")}function be(){return W("")}function O(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function l(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function Ss(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ee(t,e){t.value=e==null?"":e}function z(t,e,s,n){s===null?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}let Ze;function Ms(){if(Ze===void 0){Ze=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{Ze=!0}}return Ze}function Bs(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const n=_("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=Ms();let i;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=O(window,"message",r=>{r.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{i=O(n.contentWindow,"resize",e)}),d(t,n),()=>{(o||i&&n.contentWindow)&&i(),I(n)}}let ht;function ze(t){ht=t}function As(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const Ne=[],ve=[],We=[],kt=[],Ds=Promise.resolve();let it=!1;function Ts(){it||(it=!0,Ds.then(ds))}function Qe(t){We.push(t)}const ot=new Set;let Fe=0;function ds(){const t=ht;do{for(;Fe<Ne.length;){const e=Ne[Fe];Fe++,ze(e),Os(e.$$)}for(ze(null),Ne.length=0,Fe=0;ve.length;)ve.pop()();for(let e=0;e<We.length;e+=1){const s=We[e];ot.has(s)||(ot.add(s),s())}We.length=0}while(Ne.length);for(;kt.length;)kt.pop()();it=!1,ot.clear(),ze(t)}function Os(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Qe)}}const Ye=new Set;let Be;function Ns(){Be={r:0,c:[],p:Be}}function Rs(){Be.r||oe(Be.c),Be=Be.p}function de(t,e){t&&t.i&&(Ye.delete(t),t.i(e))}function pe(t,e,s,n){if(t&&t.o){if(Ye.has(t))return;Ye.add(t),Be.c.push(()=>{Ye.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}}const He=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Le(t){t&&t.c()}function ye(t,e,s,n){const{fragment:o,on_mount:i,on_destroy:r,after_update:a}=t.$$;o&&o.m(e,s),n||Qe(()=>{const h=i.map(hs).filter(js);r?r.push(...h):oe(h),t.$$.on_mount=[]}),a.forEach(Qe)}function _e(t,e){const s=t.$$;s.fragment!==null&&(oe(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function zs(t,e){t.$$.dirty[0]===-1&&(Ne.push(t),Ts(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,s,n,o,i,r,a=[-1]){const h=ht;ze(t);const f=t.$$={fragment:null,ctx:null,props:i,update:Y,not_equal:o,bound:mt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:mt(),dirty:a,skip_bound:!1,root:e.target||h.$$.root};r&&r(f.root);let c=!1;if(f.ctx=s?s(t,e.props||{},(p,k,...b)=>{const g=b.length?b[0]:k;return f.ctx&&o(f.ctx[p],f.ctx[p]=g)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](g),c&&zs(t,p)),k}):[],f.update(),c=!0,oe(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const p=Ss(e.target);f.fragment&&f.fragment.l(p),p.forEach(I)}else f.fragment&&f.fragment.c();e.intro&&de(t.$$.fragment),ye(t,e.target,e.anchor,e.customElement),ds()}ze(h)}class xe{$destroy(){_e(this,1),this.$destroy=Y}$on(e,s){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const o=n.indexOf(s);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!Es(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const{window:Hs}=He;function bt(t,e,s){const n=t.slice();return n[46]=e[s],n}function yt(t,e,s){const n=t.slice();return n[40]=e[s],n[41]=e,n[42]=s,n}function _t(t,e,s){const n=t.slice();return n[43]=e[s],n[44]=e,n[45]=s,n}function Vs(t){let e=t[0]&&t[11],s,n=xt(t);return{c(){n.c(),s=be()},m(o,i){n.m(o,i),E(o,s,i)},p(o,i){i[0]&2049&&le(e,e=o[0]&&o[11])?(n.d(1),n=xt(o),n.c(),n.m(s.parentNode,s)):n.p(o,i)},d(o){o&&I(s),n.d(o)}}}function Ps(t){let e,s=t[2]?t[2].administration.includes(t[1].userId):!1,n,o=t[0],i=[];for(let a=0;a<o.length;a+=1)i[a]=Et(yt(t,o,a));let r=s&&St(t);return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=S(),r&&r.c(),n=be()},m(a,h){for(let f=0;f<i.length;f+=1)i[f].m(a,h);E(a,e,h),r&&r.m(a,h),E(a,n,h)},p(a,h){if(h[0]&1308159){o=a[0];let f;for(f=0;f<o.length;f+=1){const c=yt(a,o,f);i[f]?i[f].p(c,h):(i[f]=Et(c),i[f].c(),i[f].m(e.parentNode,e))}for(;f<i.length;f+=1)i[f].d(1);i.length=o.length}h[0]&6&&(s=a[2]?a[2].administration.includes(a[1].userId):!1),s?r?r.p(a,h):(r=St(a),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(a){Ae(i,a),a&&I(e),r&&r.d(a),a&&I(n)}}}function wt(t){let e,s,n,o,i=t[46].name+"",r,a,h,f,c;function p(){return t[37](t[46])}return{c(){e=_("div"),s=_("div"),n=S(),o=_("p"),r=W(i),a=S(),z(s,"background-image","url("+t[46].profile+")"),l(s,"class","svelte-1vkns8x"),l(o,"class","svelte-1vkns8x"),l(e,"class",h="user "+(t[46].userId==t[11]?"selected":"")+" svelte-1vkns8x")},m(k,b){E(k,e,b),d(e,s),d(e,n),d(e,o),d(o,r),d(e,a),f||(c=O(e,"click",p),f=!0)},p(k,b){t=k,b[0]&1&&z(s,"background-image","url("+t[46].profile+")"),b[0]&1&&i!==(i=t[46].name+"")&&ee(r,i),b[0]&2049&&h!==(h="user "+(t[46].userId==t[11]?"selected":"")+" svelte-1vkns8x")&&l(e,"class",h)},d(k){k&&I(e),f=!1,c()}}}function xt(t){let e,s=t[0],n=[];for(let o=0;o<s.length;o+=1)n[o]=wt(bt(t,s,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=be()},m(o,i){for(let r=0;r<n.length;r+=1)n[r].m(o,i);E(o,e,i)},p(o,i){if(i[0]&2099201){s=o[0];let r;for(r=0;r<s.length;r+=1){const a=bt(o,s,r);n[r]?n[r].p(a,i):(n[r]=wt(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(o){Ae(n,o),o&&I(e)}}}function Ct(t){let e,s,n,o,i,r,a,h,f,c,p,k,b,g,w,C;function x(){return t[26](t[42],t[40])}function u(){return t[27](t[42],t[40])}function y(){return t[28](t[40])}return{c(){e=R("svg"),s=R("path"),i=S(),r=R("svg"),a=R("path"),f=S(),c=_("div"),p=W(`\uCC44\uB110\r
                            `),k=R("svg"),b=R("path"),l(s,"fill","#000"),l(s,"d",n=t[7][t[42]]?$e:et),l(s,"class","svelte-1vkns8x"),l(e,"class",o="catmenu "+(t[7][t[42]]?"edit":"")+" svelte-1vkns8x"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","15"),l(e,"height","15"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(a,"fill","#000"),l(a,"d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10Zm3.17-7.83a.996.996 0 0 1 1.41 0L12 12.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L13.41 14l1.42 1.42a.996.996 0 1 1-1.41 1.41L12 15.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L10.59 14l-1.42-1.42a.996.996 0 0 1 0-1.41ZM15.5 4l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5Z"),l(a,"class","svelte-1vkns8x"),l(r,"class",h="catdel "+(t[7][t[42]]?"on":"")+" svelte-1vkns8x"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","15"),l(r,"height","15"),l(r,"fill","none"),l(r,"viewBox","0 0 24 24"),l(b,"fill","#000"),l(b,"d","M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1Z"),l(b,"class","svelte-1vkns8x"),l(k,"xmlns","http://www.w3.org/2000/svg"),l(k,"width","15"),l(k,"height","15"),l(k,"fill","none"),l(k,"viewBox","0 0 24 25"),l(k,"class","svelte-1vkns8x"),l(c,"class",g="addChannel "+(t[6][t[42]]||t[7][t[42]]?"disable":"")+" svelte-1vkns8x")},m(m,q){E(m,e,q),d(e,s),E(m,i,q),E(m,r,q),d(r,a),E(m,f,q),E(m,c,q),d(c,p),d(c,k),d(k,b),w||(C=[O(e,"click",x),O(r,"click",u),O(c,"click",y)],w=!0)},p(m,q){t=m,q[0]&128&&n!==(n=t[7][t[42]]?$e:et)&&l(s,"d",n),q[0]&128&&o!==(o="catmenu "+(t[7][t[42]]?"edit":"")+" svelte-1vkns8x")&&l(e,"class",o),q[0]&128&&h!==(h="catdel "+(t[7][t[42]]?"on":"")+" svelte-1vkns8x")&&l(r,"class",h),q[0]&192&&g!==(g="addChannel "+(t[6][t[42]]||t[7][t[42]]?"disable":"")+" svelte-1vkns8x")&&l(c,"class",g)},d(m){m&&I(e),m&&I(i),m&&I(r),m&&I(f),m&&I(c),w=!1,oe(C)}}}function Zs(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"d","M18 0H2C0.9 0 0 0.9 0 2V17.5858C0 18.4767 1.07714 18.9229 1.70711 18.2929L3.70711 16.2929C3.89464 16.1054 4.149 16 4.41421 16H18C19.1 16 20 15.1 20 14V2C20 0.9 19.1 0 18 0Z"),l(s,"fill","black"),l(s,"class","svelte-1vkns8x"),l(e,"class","icon svelte-1vkns8x"),l(e,"width","14"),l(e,"height","19"),l(e,"viewBox","0 0 20 19"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function Fs(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"fill-rule","evenodd"),l(s,"clip-rule","evenodd"),l(s,"d","M9.87684 0.0841614C9.48316 -0.0869507 9.03053 0.0074943 8.72947 0.325274L4.21053 5.55419H1.05263C0.473684 5.55419 0 6.05531 0 6.66531V13.332C0 13.9431 0.473684 14.4431 1.05263 14.4431H4.21053L8.72947 19.6742C9.03053 19.992 9.48316 20.0876 9.87684 19.9153C10.2705 19.7431 10.5263 19.3376 10.5263 18.8876V1.10972C10.5263 0.661942 10.2705 0.254162 9.87684 0.0841614ZM12.6316 2.22074V4.44298C15.5337 4.44298 17.8947 6.93632 17.8947 9.99862C17.8947 13.062 15.5337 15.5542 12.6316 15.5542V17.7764C16.6947 17.7764 20 14.2886 20 9.99862C20 5.71076 16.6947 2.22074 12.6316 2.22074ZM12.6316 6.66521C14.3726 6.66521 15.7895 8.16194 15.7895 9.99862C15.7895 11.8375 14.3726 13.332 12.6316 13.332V11.1097C13.2116 11.1097 13.6842 10.6108 13.6842 9.99862C13.6842 9.38639 13.2116 8.8875 12.6316 8.8875V6.66521Z"),l(s,"fill","black"),l(s,"class","svelte-1vkns8x"),l(e,"class","icon svelte-1vkns8x"),l(e,"width","20"),l(e,"height","20"),l(e,"viewBox","0 0 20 20"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function It(t){let e,s,n,o;function i(){return t[32](t[42],t[45],t[40],t[43])}return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10Zm3.17-7.83a.996.996 0 0 1 1.41 0L12 12.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L13.41 14l1.42 1.42a.996.996 0 1 1-1.41 1.41L12 15.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L10.59 14l-1.42-1.42a.996.996 0 0 1 0-1.41ZM15.5 4l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5Z"),l(s,"class","svelte-1vkns8x"),l(e,"class","deleteChannel svelte-1vkns8x"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","20"),l(e,"height","20"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24")},m(r,a){E(r,e,a),d(e,s),n||(o=O(e,"click",i),n=!0)},p(r,a){t=r},d(r){r&&I(e),n=!1,o()}}}function qt(t){let e,s,n,o,i,r;function a(){return t[33](t[42],t[45],t[40],t[43])}return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d",n=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Tt)+t[45]:t[45]]?$e:et),l(s,"class","svelte-1vkns8x"),l(e,"class",o="menu "+(t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Ot)+t[45]:t[45]]?"edit":"")+" svelte-1vkns8x"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","20"),l(e,"height","20"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24")},m(h,f){E(h,e,f),d(e,s),i||(r=O(e,"click",a),i=!0)},p(h,f){t=h,f[0]&1056&&n!==(n=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Tt)+t[45]:t[45]]?$e:et)&&l(s,"d",n),f[0]&1056&&o!==(o="menu "+(t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Ot)+t[45]:t[45]]?"edit":"")+" svelte-1vkns8x")&&l(e,"class",o)},d(h){h&&I(e),i=!1,r()}}}function Lt(t){let e,s,n,o=t[43].name+"",i,r,a,h=t[42],f=t[45],c,p=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Bt)+t[45]:t[45]],k,b=t[2]?t[2].administration.includes(t[1].userId):!1,g,w,C,x;function u(N,L){if(N[43].channelType=="voice")return Fs;if(N[43].channelType=="text")return Zs}let y=u(t),m=y&&y(t);const q=()=>t[29](n,h,f),D=()=>t[29](null,h,f);function B(){return t[30](t[42],t[45])}function T(){return t[31](t[42],t[45])}let M=p&&It(t),v=b&&qt(t);function A(){return t[34](t[43])}return{c(){e=_("div"),m&&m.c(),s=S(),n=_("p"),i=W(o),c=S(),M&&M.c(),k=S(),v&&v.c(),l(n,"spellcheck","false"),l(n,"class",r=ie(t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(At)+t[45]:t[45]]?"edit":"")+" svelte-1vkns8x"),l(n,"contenteditable",a=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Dt)+t[45]:t[45]]?"true":"false"),z(n,"display","inline-block"),l(e,"id",g="channel-"+t[43].channelId),l(e,"class",w="channel "+(t[43].channelId==location.hash.replace("#/","").split("/")[1]?"selected":"")+" svelte-1vkns8x")},m(N,L){E(N,e,L),m&&m.m(e,null),d(e,s),d(e,n),d(n,i),q(),d(e,c),M&&M.m(e,null),d(e,k),v&&v.m(e,null),C||(x=[O(n,"click",B),O(n,"input",T),O(e,"click",A)],C=!0)},p(N,L){t=N,y!==(y=u(t))&&(m&&m.d(1),m=y&&y(t),m&&(m.c(),m.m(e,s))),L[0]&1&&o!==(o=t[43].name+"")&&ee(i,o),L[0]&1056&&r!==(r=ie(t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(At)+t[45]:t[45]]?"edit":"")+" svelte-1vkns8x")&&l(n,"class",r),L[0]&1056&&a!==(a=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Dt)+t[45]:t[45]]?"true":"false")&&l(n,"contenteditable",a),(h!==t[42]||f!==t[45])&&(D(),h=t[42],f=t[45],q()),L[0]&1056&&(p=t[5][t[10]&&t[42]?t[10].slice(0,t[42]).reduce(Bt)+t[45]:t[45]]),p?M?M.p(t,L):(M=It(t),M.c(),M.m(e,k)):M&&(M.d(1),M=null),L[0]&6&&(b=t[2]?t[2].administration.includes(t[1].userId):!1),b?v?v.p(t,L):(v=qt(t),v.c(),v.m(e,null)):v&&(v.d(1),v=null),L[0]&1&&g!==(g="channel-"+t[43].channelId)&&l(e,"id",g),L[0]&1&&w!==(w="channel "+(t[43].channelId==location.hash.replace("#/","").split("/")[1]?"selected":"")+" svelte-1vkns8x")&&l(e,"class",w)},d(N){N&&I(e),m&&m.d(),D(),M&&M.d(),v&&v.d(),C=!1,oe(x)}}}function jt(t){let e;return{c(){e=_("div"),l(e,"class","space svelte-1vkns8x")},m(s,n){E(s,e,n)},d(s){s&&I(e)}}}function Et(t){var L,J,te;let e,s,n,o,i,r,a=t[40].name+"",h,f,c,p=t[42],k,b=t[2]?t[2].administration.includes(t[1].userId):!1,g,w,C,x,u;function y(){return t[23](t[42])}const m=()=>t[24](r,p),q=()=>t[24](null,p);function D(){return t[25](t[42])}let B=b&&Ct(t),T=(J=(L=t[40])==null?void 0:L.channels)!=null?J:[],M=[];for(let K=0;K<T.length;K+=1)M[K]=Lt(_t(t,T,K));let v=((te=t[40].channels)==null?void 0:te.length)&&jt();const A=()=>t[35](e,p),N=()=>t[35](null,p);return{c(){var K,U,G,ae;e=_("div"),s=_("div"),n=R("svg"),o=R("path"),i=S(),r=_("p"),h=W(a),k=S(),B&&B.c(),g=S(),w=_("div");for(let X=0;X<M.length;X+=1)M[X].c();C=S(),v&&v.c(),l(o,"fill","#000"),l(o,"d","M7.38 21.01c.49.49 1.28.49 1.77 0l8.31-8.31a.996.996 0 0 0 0-1.41L9.15 2.98a1.25 1.25 0 0 0-1.77 0 1.25 1.25 0 0 0 0 1.77L14.62 12l-7.25 7.25c-.48.48-.48 1.28.01 1.76Z"),l(o,"class","svelte-1vkns8x"),z(n,"transform",t[6][t[42]]?"rotate(0deg)":"rotate(90deg)"),l(n,"xmlns","http://www.w3.org/2000/svg"),l(n,"width","10"),l(n,"height","10"),l(n,"fill","none"),l(n,"viewBox","0 0 24 24"),l(n,"class","svelte-1vkns8x"),l(r,"class",f=(t[7][t[42]]?"on":"")+" "+(t[6][t[42]]&&!t[7][t[42]]?"long":"")+" svelte-1vkns8x"),l(r,"contenteditable",c=t[7][t[42]]?"true":"false"),z(r,"display","inline-block"),l(s,"class","svelte-1vkns8x"),l(w,"class","channels svelte-1vkns8x"),l(e,"class","category svelte-1vkns8x"),z(e,"max-height",t[6][t[42]]?"28px":`${3166*((U=(K=t[40])==null?void 0:K.channels)==null?void 0:U.length)/100+28+12*((ae=(G=t[40])==null?void 0:G.channels)!=null&&ae.length?1:0)}px`)},m(K,U){E(K,e,U),d(e,s),d(s,n),d(n,o),d(s,i),d(s,r),d(r,h),m(),d(e,k),B&&B.m(e,null),d(e,g),d(e,w);for(let G=0;G<M.length;G+=1)M[G].m(w,null);d(w,C),v&&v.m(w,null),A(),x||(u=[O(n,"click",y),O(s,"click",D)],x=!0)},p(K,U){var G,ae,X,ce,ge,Q,V;if(t=K,U[0]&64&&z(n,"transform",t[6][t[42]]?"rotate(0deg)":"rotate(90deg)"),U[0]&1&&a!==(a=t[40].name+"")&&ee(h,a),U[0]&192&&f!==(f=(t[7][t[42]]?"on":"")+" "+(t[6][t[42]]&&!t[7][t[42]]?"long":"")+" svelte-1vkns8x")&&l(r,"class",f),U[0]&128&&c!==(c=t[7][t[42]]?"true":"false")&&l(r,"contenteditable",c),p!==t[42]&&(q(),p=t[42],m()),U[0]&6&&(b=t[2]?t[2].administration.includes(t[1].userId):!1),b?B?B.p(t,U):(B=Ct(t),B.c(),B.m(e,g)):B&&(B.d(1),B=null),U[0]&160823){T=(ae=(G=t[40])==null?void 0:G.channels)!=null?ae:[];let F;for(F=0;F<T.length;F+=1){const Me=_t(t,T,F);M[F]?M[F].p(Me,U):(M[F]=Lt(Me),M[F].c(),M[F].m(w,C))}for(;F<M.length;F+=1)M[F].d(1);M.length=T.length}(X=t[40].channels)!=null&&X.length?v||(v=jt(),v.c(),v.m(w,null)):v&&(v.d(1),v=null),U[0]&65&&z(e,"max-height",t[6][t[42]]?"28px":`${3166*((ge=(ce=t[40])==null?void 0:ce.channels)==null?void 0:ge.length)/100+28+12*((V=(Q=t[40])==null?void 0:Q.channels)!=null&&V.length?1:0)}px`),p!==t[42]&&(N(),p=t[42],A())},d(K){K&&I(e),q(),B&&B.d(),Ae(M,K),v&&v.d(),N(),x=!1,oe(u)}}}function St(t){let e,s,n;return{c(){e=_("div"),e.innerHTML=`\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 25" class="svelte-1vkns8x"><path fill="#000" d="M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1Z" class="svelte-1vkns8x"></path></svg>`,l(e,"class","addCategory svelte-1vkns8x")},m(o,i){E(o,e,i),s||(n=O(e,"click",t[36]),s=!0)},p:Y,d(o){o&&I(e),s=!1,n()}}}function Mt(t){let e,s;function n(r,a){var h;return a[0]&1&&(s=null),s==null&&(s=location.hash.replace("#/","").split("/")[0]!="DM"&&!((h=r[0])!=null&&h.userId)),s?Ps:Vs}let o=n(t,[-1,-1]),i=o(t);return{c(){e=_("div"),i.c(),l(e,"class","channelListContainer svelte-1vkns8x")},m(r,a){E(r,e,a),i.m(e,null)},p(r,a){o===(o=n(r,a))&&i?i.p(r,a):(i.d(1),i=o(r),i&&(i.c(),i.m(e,null)))},d(r){r&&I(e),i.d()}}}function Us(t){let e=t[9],s,n,o,i=Mt(t);return{c(){i.c(),s=be()},m(r,a){i.m(r,a),E(r,s,a),n||(o=O(Hs,"hashchange",t[18]),n=!0)},p(r,a){a[0]&512&&le(e,e=r[9])?(i.d(1),i=Mt(r),i.c(),i.m(s.parentNode,s)):i.p(r,a)},i:Y,o:Y,d(r){r&&I(s),i.d(r),n=!1,o()}}}let $e="m9 16.2-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2Z",et="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2Z";const Bt=(t,e)=>t+e,At=(t,e)=>t+e,Dt=(t,e)=>t+e,Tt=(t,e)=>t+e,Ot=(t,e)=>t+e;function Ks(t,e,s){let{chatChannelData:n}=e,{meInfo:o}=e,{currentServer:i}=e,{socket:r}=e,a=[],h=[],f=[],c=[],p=[],k=[],b=location.hash.replace("#/","").split("/")[0],g,w,C=!1,x=!1;const u=j=>{if(C)return C=!1;if(x)return s(12,x=!1);location.hash=`#/${location.hash.replace("#/","").split("/")[0]}/${j}`},y=(j,H,$)=>{C=!0,h[j].scrollTo(-h[j].scrollWidth,0),s(5,f[j]=!f[j],f),f[j]||r.emit("editChannel",{serverId:i.serverId,categoryId:H,channelId:$,name:h[j].textContent,token:window.localStorage.getItem("token")})},m=(j,H)=>{k[j].scrollTo(-k[j].scrollWidth,0),s(7,p[j]=!p[j],p),f[j]||r.emit("editCategory",{serverId:i.serverId,categoryId:H,name:k[j].textContent,token:window.localStorage.getItem("token")})},q=(j,H)=>{p.splice(j,1),c.splice(j,1),s(6,c=[...c]),s(7,p=[...p]),r.emit("deleteCategory",{serverId:i.serverId,categoryId:H,token:window.localStorage.getItem("token")})},D=(j,H,$)=>{C=!0,f.splice(j,1),r.emit("deleteChannel",{serverId:i.serverId,categoryId:H,channelId:$,token:window.localStorage.getItem("token")})},B=()=>{location.hash.replace("#/","").split("/")[0]!="DM"?A():s(11,w=location.hash.replace("#/","").split("/")[1])},T=()=>{r.emit("createCategory",{serverId:i.serverId,token:window.localStorage.getItem("token")})},M=j=>{r.emit("createChannel",{serverId:i.serverId,categoryId:j,channelType:"text",token:window.localStorage.getItem("token")})},v=j=>{location.hash=`#/DM/${j}`},A=async()=>{const j=b!=location.hash.replace("#/","").split("/")[0];s(10,g=n.map(H=>{var $;return($=H.channels)==null?void 0:$.length})),j&&(s(9,b=location.hash.replace("#/","").split("/")[0]),s(6,c=[]))};A();const N=j=>s(6,c[j]=p[j]?!c[j]:c[j],c);function L(j,H){ve[j?"unshift":"push"](()=>{k[H]=j,s(8,k)})}const J=j=>s(6,c[j]=p[j]?c[j]:!c[j],c),te=(j,H)=>m(j,H.categoryId),K=(j,H)=>q(j,H.categoryId),U=j=>M(j.categoryId);function G(j,H,$){ve[j?"unshift":"push"](()=>{h[g&&H?g.slice(0,H).reduce((re,Ce)=>re+Ce)+$:$]=j,s(4,h)})}const ae=(j,H)=>s(12,x=f[g&&j?g.slice(0,j).reduce(($,re)=>$+re)+H:H]),X=(j,H)=>s(4,h[g&&j?g.slice(0,j).reduce(($,re)=>$+re)+H:H].textContent=h[g&&j?g.slice(0,j).reduce(($,re)=>$+re)+H:H].textContent.replace(`
`,""),h),ce=(j,H,$,re)=>D(g&&j?g.slice(0,j).reduce((Ce,Ie)=>Ce+Ie)+H:H,$.categoryId,re.channelId),ge=(j,H,$,re)=>y(g&&j?g.slice(0,j).reduce((Ce,Ie)=>Ce+Ie)+H:H,$.categoryId,re.channelId),Q=j=>u(j.channelId);function V(j,H){ve[j?"unshift":"push"](()=>{a[H]=j,s(3,a)})}const F=()=>T(),Me=j=>v(j.userId);return t.$$set=j=>{"chatChannelData"in j&&s(0,n=j.chatChannelData),"meInfo"in j&&s(1,o=j.meInfo),"currentServer"in j&&s(2,i=j.currentServer),"socket"in j&&s(22,r=j.socket)},t.$$.update=()=>{t.$$.dirty[0]&1&&B()},[n,o,i,a,h,f,c,p,k,b,g,w,x,u,y,m,q,D,B,T,M,v,r,N,L,J,te,K,U,G,ae,X,ce,ge,Q,V,F,Me]}class Ws extends xe{constructor(e){super(),we(this,e,Ks,Us,le,{chatChannelData:0,meInfo:1,currentServer:2,socket:22},null,[-1,-1])}}function Ys(t){let e;function s(i,r){if(i[0].channelType=="voice")return Xs;if(i[0].channelType=="text")return Js}let n=s(t),o=n&&n(t);return{c(){o&&o.c(),e=be()},m(i,r){o&&o.m(i,r),E(i,e,r)},p(i,r){n!==(n=s(i))&&(o&&o.d(1),o=n&&n(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){o&&o.d(i),i&&I(e)}}}function Js(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"d","M18 0H2C0.9 0 0 0.9 0 2V17.5858C0 18.4767 1.07714 18.9229 1.70711 18.2929L3.70711 16.2929C3.89464 16.1054 4.149 16 4.41421 16H18C19.1 16 20 15.1 20 14V2C20 0.9 19.1 0 18 0Z"),l(s,"fill","white"),l(s,"class","svelte-6tmn6l"),l(e,"width","14"),l(e,"height","19"),l(e,"viewBox","0 0 20 19"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-6tmn6l")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function Xs(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"fill-rule","evenodd"),l(s,"clip-rule","evenodd"),l(s,"d","M9.87684 0.0841614C9.48316 -0.0869507 9.03053 0.0074943 8.72947 0.325274L4.21053 5.55419H1.05263C0.473684 5.55419 0 6.05531 0 6.66531V13.332C0 13.9431 0.473684 14.4431 1.05263 14.4431H4.21053L8.72947 19.6742C9.03053 19.992 9.48316 20.0876 9.87684 19.9153C10.2705 19.7431 10.5263 19.3376 10.5263 18.8876V1.10972C10.5263 0.661942 10.2705 0.254162 9.87684 0.0841614ZM12.6316 2.22074V4.44298C15.5337 4.44298 17.8947 6.93632 17.8947 9.99862C17.8947 13.062 15.5337 15.5542 12.6316 15.5542V17.7764C16.6947 17.7764 20 14.2886 20 9.99862C20 5.71076 16.6947 2.22074 12.6316 2.22074ZM12.6316 6.66521C14.3726 6.66521 15.7895 8.16194 15.7895 9.99862C15.7895 11.8375 14.3726 13.332 12.6316 13.332V11.1097C13.2116 11.1097 13.6842 10.6108 13.6842 9.99862C13.6842 9.38639 13.2116 8.8875 12.6316 8.8875V6.66521Z"),l(s,"fill","white"),l(s,"class","svelte-6tmn6l"),l(e,"width","20"),l(e,"height","20"),l(e,"viewBox","0 0 20 20"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-6tmn6l")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function Nt(t){var a,h,f;let e=location.hash.replace("#/","").split("/")[0]!="DM",s,n,o=(((a=t[0])==null?void 0:a.length)!=0&&(f=(h=t[0])==null?void 0:h.name)!=null?f:"")+"",i,r=e&&Ys(t);return{c(){r&&r.c(),s=S(),n=_("p"),i=W(o),z(n,"display","inline-block"),l(n,"class","svelte-6tmn6l")},m(c,p){r&&r.m(c,p),E(c,s,p),E(c,n,p),d(n,i)},p(c,p){var k,b,g;e&&r.p(c,p),p&1&&o!==(o=(((k=c[0])==null?void 0:k.length)!=0&&(g=(b=c[0])==null?void 0:b.name)!=null?g:"")+"")&&ee(i,o)},d(c){r&&r.d(c),c&&I(s),c&&I(n)}}}function Gs(t){let e,s,n=t[0],o,i,r,a,h=Nt(t);return{c(){e=_("div"),s=_("div"),h.c(),o=S(),i=_("button"),i.innerHTML='<svg width="30" height="20" fill="none" viewBox="0 0 30 20" xmlns="http://www.w3.org/2000/svg" class="svelte-6tmn6l"><path fill="#FFF" d="M0 18.333C0 19.253.746 20 1.667 20h26.666a1.667 1.667 0 1 0 0-3.333H1.667c-.92 0-1.667.746-1.667 1.666ZM0 10c0 .92.746 1.667 1.667 1.667h26.666a1.667 1.667 0 1 0 0-3.334H1.667C.747 8.333 0 9.08 0 10ZM1.667 0a1.667 1.667 0 0 0 0 3.333h26.666a1.667 1.667 0 1 0 0-3.333H1.667Z" class="svelte-6tmn6l"></path></svg>',l(s,"class","channel svelte-6tmn6l"),l(i,"class","sideMenuButton svelte-6tmn6l"),l(e,"class","channelNameContainer svelte-6tmn6l")},m(f,c){E(f,e,c),d(e,s),h.m(s,null),d(e,o),d(e,i),r||(a=O(i,"click",t[1]),r=!0)},p(f,[c]){c&1&&le(n,n=f[0])?(h.d(1),h=Nt(f),h.c(),h.m(s,null)):h.p(f,c)},i:Y,o:Y,d(f){f&&I(e),h.d(f),r=!1,a()}}}function Qs(t,e,s){let{chatChannelData:n}=e;function o(i){As.call(this,t,i)}return t.$$set=i=>{"chatChannelData"in i&&s(0,n=i.chatChannelData)},[n,o]}class $s extends xe{constructor(e){super(),we(this,e,Qs,Gs,le,{chatChannelData:0})}}const{window:en}=He;function Rt(t,e,s){const n=t.slice();return n[8]=e[s],n}function tn(t){let e;return{c(){e=_("p"),e.textContent="DM",l(e,"class","dm svelte-q8g8x")},m(s,n){E(s,e,n)},p:Y,d(s){s&&I(e)}}}function sn(t){let e,s,n,o,i=(t[1]?t[1].name:"")+"",r,a,h=t[4]&&zt(t);return{c(){var f;e=_("div"),s=S(),h&&h.c(),n=S(),o=_("p"),r=W(i),l(e,"class","userProfileInfo svelte-q8g8x"),z(e,"background-image","url("+(t[7]?t[7]:(f=t[1])==null?void 0:f.icon)+")"),l(o,"class",a=ie(t[4]?"edited":"")+" svelte-q8g8x"),l(o,"contenteditable",t[4])},m(f,c){E(f,e,c),E(f,s,c),h&&h.m(f,c),E(f,n,c),E(f,o,c),d(o,r),t[17](o)},p(f,c){var p;c&130&&z(e,"background-image","url("+(f[7]?f[7]:(p=f[1])==null?void 0:p.icon)+")"),f[4]?h?h.p(f,c):(h=zt(f),h.c(),h.m(n.parentNode,n)):h&&(h.d(1),h=null),c&2&&i!==(i=(f[1]?f[1].name:"")+"")&&ee(r,i),c&16&&a!==(a=ie(f[4]?"edited":"")+" svelte-q8g8x")&&l(o,"class",a),c&16&&l(o,"contenteditable",f[4])},d(f){f&&I(e),f&&I(s),h&&h.d(f),f&&I(n),f&&I(o),t[17](null)}}}function zt(t){let e,s,n,o,i;return{c(){e=_("input"),s=S(),n=_("label"),n.innerHTML='<div class="editImage svelte-q8g8x"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 19 19" class="svelte-q8g8x"><path fill="#000" d="M18.02 3H16V.98c0-.54-.44-.98-.98-.98h-.03c-.55 0-.99.44-.99.98V3h-2.01c-.54 0-.98.44-.99.98v.03c0 .55.44.99.99.99H14v2.01c0 .54.44.99.99.98h.03c.54 0 .98-.44.98-.98V5h2.02c.54 0 .98-.44.98-.98v-.04c0-.54-.44-.98-.98-.98ZM13 7.01V6h-1.01c-.53 0-1.03-.21-1.41-.58-.37-.38-.58-.88-.58-1.44 0-.36.1-.69.27-.98H2C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8.72c-.3.17-.64.28-1.02.28A2 2 0 0 1 13 7.01ZM12.96 17H3a.5.5 0 0 1-.4-.8l1.98-2.63c.21-.28.62-.26.82.02L7 16l2.61-3.48c.2-.26.59-.27.79-.01l2.95 3.68c.26.33.03.81-.39.81Z" class="svelte-q8g8x"></path></svg></div>',l(e,"type","file"),l(e,"accept","image/*"),l(e,"id","imgUpload"),l(e,"name","imgUpload"),l(e,"class","svelte-q8g8x"),l(n,"for","imgUpload"),l(n,"class","svelte-q8g8x")},m(r,a){E(r,e,a),E(r,s,a),E(r,n,a),o||(i=[O(e,"change",t[16]),O(e,"change",fn)],o=!0)},p:Y,d(r){r&&I(e),r&&I(s),r&&I(n),o=!1,oe(i)}}}function Ht(t){let e;function s(i,r){return location.hash.replace("#/","").split("/")[0]!="DM"?sn:tn}let o=s()(t);return{c(){o.c(),e=be()},m(i,r){o.m(i,r),E(i,e,r)},p(i,r){o.p(i,r)},d(i){o.d(i),i&&I(e)}}}function nn(t){let e,s,n,o,i;return{c(){e=_("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="svelte-q8g8x"><path fill="#fff" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10Zm3.17-7.83a.996.996 0 0 1 1.41 0L12 12.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L13.41 14l1.42 1.42a.996.996 0 1 1-1.41 1.41L12 15.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L10.59 14l-1.42-1.42a.996.996 0 0 1 0-1.41ZM15.5 4l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5Z" class="svelte-q8g8x"></path></svg>',s=S(),n=_("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 18 13" class="svelte-q8g8x"><path fill="#fff" d="M6 10.17 2.53 6.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L17.29 1.71A.996.996 0 1 0 15.88.3L6 10.17Z" class="svelte-q8g8x"></path></svg>',l(e,"class","del svelte-q8g8x"),l(n,"class","serverEditButton svelte-q8g8x")},m(r,a){E(r,e,a),E(r,s,a),E(r,n,a),o||(i=[O(e,"click",t[19]),O(n,"click",t[20])],o=!0)},p:Y,d(r){r&&I(e),r&&I(s),r&&I(n),o=!1,oe(i)}}}function on(t){let e,s,n,o,i;return{c(){e=_("button"),s=R("svg"),n=R("path"),l(n,"fill","#FFF"),l(n,"d","M2.477.707a1 1 0 0 0-1.414 0l-.356.356a1 1 0 0 0 0 1.414l8.586 8.586a1 1 0 0 0 1.414 0l8.586-8.586a1 1 0 0 0 0-1.414l-.356-.356a1 1 0 0 0-1.414 0l-6.816 6.816a1 1 0 0 1-1.414 0L2.477.707Z"),l(n,"class","svelte-q8g8x"),l(s,"width","20"),l(s,"height","12"),l(s,"fill","none"),l(s,"viewBox","0 0 20 12"),l(s,"xmlns","http://www.w3.org/2000/svg"),z(s,"transform",t[5]?"rotate(0deg)":"rotate(180deg)"),l(s,"class","svelte-q8g8x"),l(e,"class","serverDropdownButton svelte-q8g8x")},m(r,a){E(r,e,a),d(e,s),d(s,n),o||(i=O(e,"click",t[18]),o=!0)},p(r,a){a&32&&z(s,"transform",r[5]?"rotate(0deg)":"rotate(180deg)")},d(r){r&&I(e),o=!1,i()}}}function ln(t){let e,s,n;return{c(){e=_("div"),e.innerHTML=`\uC11C\uBC84
                        <svg width="20" height="20" viewBox="0 0 24 30" class="svelte-q8g8x"><path fill="#fff" d="M18 2H7C5.897 2 5 2.898 5 4V11H12.59L10.293 8.708L11.706 7.292L16.414 11.991L11.708 16.706L10.292 15.294L12.582 13H5V20C5 21.103 5.897 22 7 22H18C19.103 22 20 21.103 20 20V4C20 2.898 19.103 2 18 2Z" class="svelte-q8g8x"></path></svg>`,l(e,"class","setserver svelte-q8g8x")},m(o,i){E(o,e,i),s||(n=O(e,"click",t[24]),s=!0)},p:Y,d(o){o&&I(e),s=!1,n()}}}function rn(t){let e,s,n;return{c(){e=_("div"),e.innerHTML=`\uC11C\uBC84
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 33" class="svelte-q8g8x"><path fill="#fff" d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65ZM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5Z" class="svelte-q8g8x"></path></svg>`,l(e,"class","setserver svelte-q8g8x")},m(o,i){E(o,e,i),s||(n=O(e,"click",t[23]),s=!0)},p:Y,d(o){o&&I(e),s=!1,n()}}}function Vt(t){let e,s,n,o,i,r,a,h,f,c,p,k,b;function g(x,u){var y,m;if(u&6&&(f=null),f==null&&(f=!!((m=(y=x[1])==null?void 0:y.administration)!=null&&m.includes(x[2].userId))),f)return rn;if(c==null&&(c=location.hash.replace("#/","").split("/")[0]!="DM"),c)return ln}let w=g(t,-1),C=w&&w(t);return{c(){e=_("div"),s=W("DM"),n=S(),o=_("div"),i=W(`\uC11C\uBC84\r
                    `),r=R("svg"),a=R("path"),h=S(),C&&C.c(),p=be(),l(e,"class","dm "+(location.hash.replace("#/","").split("/")[0]=="DM"?"active":"")+" svelte-q8g8x"),l(a,"fill","#fff"),l(a,"d","M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1Z"),l(a,"class","svelte-q8g8x"),l(r,"xmlns","http://www.w3.org/2000/svg"),l(r,"width","25"),l(r,"height","25"),l(r,"fill","none"),l(r,"viewBox","0 0 24 29"),l(r,"class","svelte-q8g8x"),l(o,"class","addserver svelte-q8g8x"),z(o,"right",location.hash.replace("#/","").split("/")[0]!="DM"?"71px":"0px")},m(x,u){E(x,e,u),d(e,s),E(x,n,u),E(x,o,u),d(o,i),d(o,r),d(r,a),E(x,h,u),C&&C.m(x,u),E(x,p,u),k||(b=[O(e,"click",t[21]),O(o,"click",t[22])],k=!0)},p(x,u){w===(w=g(x,u))&&C?C.p(x,u):(C&&C.d(1),C=w&&w(x),C&&(C.c(),C.m(p.parentNode,p)))},d(x){x&&I(e),x&&I(n),x&&I(o),x&&I(h),C&&C.d(x),x&&I(p),k=!1,oe(b)}}}function Pt(t){let e,s,n,o,i=t[8].name+"",r,a,h,f,c,p;function k(){return t[25](t[8])}return{c(){e=_("div"),s=_("div"),n=S(),o=_("p"),r=W(i),a=S(),z(s,"background-image","url("+t[8].icon+")"),l(s,"class","svelte-q8g8x"),l(o,"class","svelte-q8g8x"),l(e,"id",h="server-"+t[8].serverId),l(e,"class",f="server "+(t[1]&&t[8].serverId==t[1].serverId?"active":"")+" svelte-q8g8x")},m(b,g){E(b,e,g),d(e,s),d(e,n),d(e,o),d(o,r),d(e,a),c||(p=O(e,"click",k),c=!0)},p(b,g){t=b,g&1&&z(s,"background-image","url("+t[8].icon+")"),g&1&&i!==(i=t[8].name+"")&&ee(r,i),g&1&&h!==(h="server-"+t[8].serverId)&&l(e,"id",h),g&3&&f!==(f="server "+(t[1]&&t[8].serverId==t[1].serverId?"active":"")+" svelte-q8g8x")&&l(e,"class",f)},d(b){b&&I(e),c=!1,p()}}}function an(t){let e,s,n=t[1],o,i,r,a,h=t[1],f,c,p,k,b,g=Ht(t);function w(q,D){return q[4]?nn:on}let C=w(t),x=C(t),u=Vt(t),y=t[0],m=[];for(let q=0;q<y.length;q+=1)m[q]=Pt(Rt(t,y,q));return{c(){e=_("div"),s=_("div"),g.c(),o=S(),x.c(),i=S(),r=_("div"),a=_("div"),u.c(),f=S(),c=_("div"),p=S();for(let q=0;q<m.length;q+=1)m[q].c();l(s,"class","server svelte-q8g8x"),l(a,"class","pannel svelte-q8g8x"),l(c,"class","line svelte-q8g8x"),z(r,"height",t[5]?"210px":"0px"),z(r,"border-top",(t[5]?"1px":"0px")+" solid #000000"),l(r,"class","svelte-q8g8x"),l(e,"class","serverListContainer svelte-q8g8x")},m(q,D){E(q,e,D),d(e,s),g.m(s,null),d(e,o),x.m(e,null),d(e,i),d(e,r),d(r,a),u.m(a,null),d(r,f),d(r,c),d(r,p);for(let B=0;B<m.length;B+=1)m[B].m(r,null);k||(b=O(en,"hashchange",t[14]),k=!0)},p(q,[D]){if(D&2&&le(n,n=q[1])?(g.d(1),g=Ht(q),g.c(),g.m(s,null)):g.p(q,D),C===(C=w(q))&&x?x.p(q,D):(x.d(1),x=C(q),x&&(x.c(),x.m(e,i))),D&2&&le(h,h=q[1])?(u.d(1),u=Vt(q),u.c(),u.m(a,null)):u.p(q,D),D&515){y=q[0];let B;for(B=0;B<y.length;B+=1){const T=Rt(q,y,B);m[B]?m[B].p(T,D):(m[B]=Pt(T),m[B].c(),m[B].m(r,null))}for(;B<m.length;B+=1)m[B].d(1);m.length=y.length}D&32&&z(r,"height",q[5]?"210px":"0px"),D&32&&z(r,"border-top",(q[5]?"1px":"0px")+" solid #000000")},i:Y,o:Y,d(q){q&&I(e),g.d(q),x.d(),u.d(q),Ae(m,q),k=!1,b()}}}function cn(t,e){var s=new FileReader;s.onload=function(n){e(n.target.result)},s.readAsDataURL(t)}const fn=()=>{};function hn(t,e,s){let{socket:n}=e,{serverData:o}=e,{currentServer:i}=e,{meInfo:r}=e,a=!1,h=!1,f,c,p,k=location.hash.replace("#/","").split("/")[0];const b=L=>{var J,te,K,U;s(5,h=!1),location.hash=`#/${L}/${(U=(K=(te=(J=o.find(G=>G.serverId==L))==null?void 0:J.categories[0])==null?void 0:te.channels[0])==null?void 0:K.channelId)!=null?U:"main"}`},g=()=>{n.emit("createServer",{token:window.localStorage.getItem("token")}),s(5,h=!1)},w=()=>{f.scrollTo(-f.scrollWidth,0),a&&n.emit("editServer",{serverId:i.serverId,name:f.textContent,icon:p,token:window.localStorage.getItem("token")}),s(5,h=!h),s(4,a=!a)},C=()=>{n.emit("leaveServer",{serverId:i.serverId,token:window.localStorage.getItem("token")}),s(5,h=!1)},x=()=>{n.emit("deleteServer",{serverId:i.serverId,token:window.localStorage.getItem("token")}),s(4,a=!1)},u=()=>{const L=k!=location.hash.replace("#/","").split("/")[0];s(8,k=location.hash.replace("#/","").split("/")[0]),L&&(s(3,c=void 0),s(7,p=void 0))};function y(){c=this.files,s(3,c)}function m(L){ve[L?"unshift":"push"](()=>{f=L,s(6,f)})}const q=()=>s(5,h=!h),D=()=>x(),B=()=>w(),T=()=>b("DM"),M=()=>g(),v=()=>w(),A=()=>C(),N=L=>b(L.serverId);return t.$$set=L=>{"socket"in L&&s(15,n=L.socket),"serverData"in L&&s(0,o=L.serverData),"currentServer"in L&&s(1,i=L.currentServer),"meInfo"in L&&s(2,r=L.meInfo)},t.$$.update=()=>{t.$$.dirty&8&&c&&cn(c[0],L=>s(7,p=L))},[o,i,r,c,a,h,f,p,k,b,g,w,C,x,u,n,y,m,q,D,B,T,M,v,A,N]}class dn extends xe{constructor(e){super(),we(this,e,hn,an,le,{socket:15,serverData:0,currentServer:1,meInfo:2})}}function Zt(t){let e,s,n,o,i;return{c(){e=_("input"),s=S(),n=_("label"),n.innerHTML='<div class="editImage svelte-118kioy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 19 19" class="svelte-118kioy"><path fill="#000" d="M18.02 3H16V.98c0-.54-.44-.98-.98-.98h-.03c-.55 0-.99.44-.99.98V3h-2.01c-.54 0-.98.44-.99.98v.03c0 .55.44.99.99.99H14v2.01c0 .54.44.99.99.98h.03c.54 0 .98-.44.98-.98V5h2.02c.54 0 .98-.44.98-.98v-.04c0-.54-.44-.98-.98-.98ZM13 7.01V6h-1.01c-.53 0-1.03-.21-1.41-.58-.37-.38-.58-.88-.58-1.44 0-.36.1-.69.27-.98H2C.9 3 0 3.9 0 5v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8.72c-.3.17-.64.28-1.02.28A2 2 0 0 1 13 7.01ZM12.96 17H3a.5.5 0 0 1-.4-.8l1.98-2.63c.21-.28.62-.26.82.02L7 16l2.61-3.48c.2-.26.59-.27.79-.01l2.95 3.68c.26.33.03.81-.39.81Z" class="svelte-118kioy"></path></svg></div>',l(e,"type","file"),l(e,"accept","image/*"),l(e,"id","imgUpload"),l(e,"name","imgUpload"),l(e,"class","svelte-118kioy"),l(n,"for","imgUpload"),l(n,"class","svelte-118kioy")},m(r,a){E(r,e,a),E(r,s,a),E(r,n,a),o||(i=[O(e,"change",t[9]),O(e,"change",mn)],o=!0)},p:Y,d(r){r&&I(e),r&&I(s),r&&I(n),o=!1,oe(i)}}}function Ft(t){let e,s,n,o;return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d","M2.895.545c0-.3.244-.545.545-.545h6.402C10.48 0 11 .49 11 1.09v7.058a.579.579 0 1 1-1.158 0V2.091a1 1 0 0 0-1-1H3.44a.545.545 0 0 1-.545-.546ZM1.158 2.182h6.368c.637 0 1.158.49 1.158 1.09v7.637c0 .6-.52 1.091-1.158 1.091H1.158C.52 12 0 11.51 0 10.91V3.272c0-.6.521-1.091 1.158-1.091Zm0 7.727a1 1 0 0 0 1 1h4.368a1 1 0 0 0 1-1V4.273a1 1 0 0 0-1-1H2.158a1 1 0 0 0-1 1v5.636Z"),l(s,"class","svelte-118kioy"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","11"),l(e,"height","12"),l(e,"fill","none"),l(e,"viewBox","0 0 11 12"),l(e,"class","svelte-118kioy")},m(i,r){E(i,e,r),d(e,s),n||(o=O(e,"click",t[12]),n=!0)},p:Y,d(i){i&&I(e),n=!1,o()}}}function un(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d","M0 12.667V16h3.333l9.83-9.83L9.83 2.837 0 12.667Zm15.74-9.074a.885.885 0 0 0 0-1.253L13.66.26a.885.885 0 0 0-1.253 0l-1.626 1.626 3.333 3.333 1.626-1.626Z"),l(s,"class","svelte-118kioy"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","16"),l(e,"height","16"),l(e,"fill","none"),l(e,"viewBox","0 0 16 16"),l(e,"class","svelte-118kioy")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function pn(t){let e,s;return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d","M6 10.17 2.53 6.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L17.29 1.71A.996.996 0 1 0 15.88.3L6 10.17Z"),l(s,"class","svelte-118kioy"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","18"),l(e,"height","13"),l(e,"fill","none"),l(e,"viewBox","0 0 18 13"),l(e,"class","svelte-118kioy")},m(n,o){E(n,e,o),d(e,s)},d(n){n&&I(e)}}}function vn(t){let e,s,n,o,i,r,a,h,f,c=t[0].name+"",p,k,b,g,w,C,x,u,y=t[0].email+"",m,q,D,B,T,M,v,A,N,L=t[0].description+"",J,te,K,U,G,ae,X,ce,ge,Q,V=(Object.keys(t[0]).length!=0?t[0].name:"")+"",F,Me,j,H,$,re,Ce,Ie,Ve=(Object.keys(t[0]).length!=0?t[0].email:"")+"",st,pt,Te,nt,vt,fe=t[2]&&Zt(t),he=!t[2]&&Ft(t);function gt(P,ne){return P[2]?pn:un}let Pe=gt(t),qe=Pe(t);return{c(){e=_("div"),s=_("div"),n=_("div"),o=S(),fe&&fe.c(),i=S(),r=_("div"),a=_("div"),h=S(),f=_("p"),p=W(c),g=S(),he&&he.c(),w=S(),C=_("div"),x=S(),u=_("p"),m=W(y),q=S(),D=_("button"),qe.c(),B=S(),T=_("p"),T.textContent="\uC18C\uAC1C",M=S(),v=_("div"),A=S(),N=_("div"),J=W(L),U=S(),G=_("div"),ae=S(),X=_("div"),ce=_("div"),ge=S(),Q=_("p"),F=W(V),Me=S(),j=R("svg"),H=R("path"),$=S(),re=_("div"),Ce=S(),Ie=_("p"),st=W(Ve),pt=S(),Te=_("button"),Te.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="svelte-118kioy"><path fill="#000" d="M22.1 13.882c-.571-.437-.849-1.148-.848-1.868V12c0-.725.273-1.45.851-1.887l1.668-1.263a.602.602 0 0 0 .154-.762l-2.467-4.15c-.154-.276-.475-.363-.758-.276l-2.043.799c-.64.25-1.355.139-1.95-.207a9.627 9.627 0 0 0-.117-.068c-.623-.351-1.107-.935-1.21-1.644l-.296-2.03A.617.617 0 0 0 14.467 0H9.533a.604.604 0 0 0-.604.512l-.296 2.03c-.103.709-.586 1.294-1.21 1.646l-.12.07c-.592.345-1.306.453-1.944.204l-2.046-.8a.621.621 0 0 0-.758.276L.1 8.088c-.154.262-.103.587.154.762l1.667 1.261c.579.439.826 1.163.826 1.889 0 .725-.272 1.45-.85 1.887L.229 15.15a.602.602 0 0 0-.154.762l2.467 4.15c.154.275.475.363.758.275l2.043-.798c.64-.25 1.355-.139 1.95.207.038.023.077.046.117.068.624.351 1.107.935 1.21 1.644l.296 2.03c.064.3.308.512.617.512h4.934a.594.594 0 0 0 .604-.512l.296-2.03c.103-.709.587-1.292 1.211-1.642l.108-.061c.6-.348 1.324-.464 1.97-.211l2.031.793c.283.1.604 0 .758-.274l2.468-4.15c.154-.276.09-.588-.155-.763L22.1 13.882ZM12 16.5c-2.544 0-4.626-2.025-4.626-4.5S9.456 7.5 12 7.5c2.544 0 4.626 2.025 4.626 4.5S14.544 16.5 12 16.5Z" class="svelte-118kioy"></path></svg>',l(n,"class","userProfileInfo svelte-118kioy"),z(n,"background-image","url("+(t[4].profile?t[4].profile:t[0].profile)+")"),z(a,"background-image","url("+t[0].profile+")"),l(a,"class","svelte-118kioy"),l(f,"contenteditable",k=t[2]?"true":"false"),l(f,"class",b=ie(t[2]?"edit":"")+" svelte-118kioy"),l(C,"class","line-break svelte-118kioy"),l(u,"class","svelte-118kioy"),l(r,"class","me svelte-118kioy"),l(D,"class","svelte-118kioy"),l(T,"class","svelte-118kioy"),l(v,"class","on svelte-118kioy"),l(N,"contenteditable",te=t[2]?"true":"false"),l(N,"class",K=ie(t[2]?"on":"")+" svelte-118kioy"),l(s,"class","userProfileEdit svelte-118kioy"),z(s,"display",t[3]?"flex":"none"),l(G,"class","userProfileInfo svelte-118kioy"),z(G,"background-image","url("+(Object.keys(t[0]).length!=0?t[0].profile:"")+")"),z(ce,"background-image","url("+(Object.keys(t[0]).length!=0?t[0].profile:"")+")"),l(ce,"class","svelte-118kioy"),l(Q,"class","svelte-118kioy"),l(H,"fill","#000"),l(H,"d","M2.895.545c0-.3.244-.545.545-.545h6.402C10.48 0 11 .49 11 1.09v7.058a.579.579 0 1 1-1.158 0V2.091a1 1 0 0 0-1-1H3.44a.545.545 0 0 1-.545-.546ZM1.158 2.182h6.368c.637 0 1.158.49 1.158 1.09v7.637c0 .6-.52 1.091-1.158 1.091H1.158C.52 12 0 11.51 0 10.91V3.272c0-.6.521-1.091 1.158-1.091Zm0 7.727a1 1 0 0 0 1 1h4.368a1 1 0 0 0 1-1V4.273a1 1 0 0 0-1-1H2.158a1 1 0 0 0-1 1v5.636Z"),l(H,"class","svelte-118kioy"),l(j,"xmlns","http://www.w3.org/2000/svg"),l(j,"width","11"),l(j,"height","12"),l(j,"fill","none"),l(j,"viewBox","0 0 11 12"),l(j,"class","svelte-118kioy"),l(re,"class","line-break svelte-118kioy"),l(Ie,"class","svelte-118kioy"),l(X,"class","me svelte-118kioy"),l(Te,"class","svelte-118kioy"),l(e,"class","userInfoContainer svelte-118kioy")},m(P,ne){E(P,e,ne),d(e,s),d(s,n),d(s,o),fe&&fe.m(s,null),d(s,i),d(s,r),d(r,a),d(r,h),d(r,f),d(f,p),t[11](f),d(r,g),he&&he.m(r,null),d(r,w),d(r,C),d(r,x),d(r,u),d(u,m),d(s,q),d(s,D),qe.m(D,null),d(s,B),d(s,T),d(s,M),d(s,v),d(s,A),d(s,N),d(N,J),t[13](N),d(e,U),d(e,G),d(e,ae),d(e,X),d(X,ce),d(X,ge),d(X,Q),d(Q,F),d(X,Me),d(X,j),d(j,H),d(X,$),d(X,re),d(X,Ce),d(X,Ie),d(Ie,st),d(e,pt),d(e,Te),nt||(vt=[O(f,"input",t[10]),O(D,"click",t[7]),O(j,"click",t[14]),O(Te,"click",t[15])],nt=!0)},p(P,[ne]){ne&17&&z(n,"background-image","url("+(P[4].profile?P[4].profile:P[0].profile)+")"),P[2]?fe?fe.p(P,ne):(fe=Zt(P),fe.c(),fe.m(s,i)):fe&&(fe.d(1),fe=null),ne&1&&z(a,"background-image","url("+P[0].profile+")"),ne&1&&c!==(c=P[0].name+"")&&ee(p,c),ne&4&&k!==(k=P[2]?"true":"false")&&l(f,"contenteditable",k),ne&4&&b!==(b=ie(P[2]?"edit":"")+" svelte-118kioy")&&l(f,"class",b),P[2]?he&&(he.d(1),he=null):he?he.p(P,ne):(he=Ft(P),he.c(),he.m(r,w)),ne&1&&y!==(y=P[0].email+"")&&ee(m,y),Pe!==(Pe=gt(P))&&(qe.d(1),qe=Pe(P),qe&&(qe.c(),qe.m(D,null))),ne&1&&L!==(L=P[0].description+"")&&ee(J,L),ne&4&&te!==(te=P[2]?"true":"false")&&l(N,"contenteditable",te),ne&4&&K!==(K=ie(P[2]?"on":"")+" svelte-118kioy")&&l(N,"class",K),ne&8&&z(s,"display",P[3]?"flex":"none"),ne&1&&z(G,"background-image","url("+(Object.keys(P[0]).length!=0?P[0].profile:"")+")"),ne&1&&z(ce,"background-image","url("+(Object.keys(P[0]).length!=0?P[0].profile:"")+")"),ne&1&&V!==(V=(Object.keys(P[0]).length!=0?P[0].name:"")+"")&&ee(F,V),ne&1&&Ve!==(Ve=(Object.keys(P[0]).length!=0?P[0].email:"")+"")&&ee(st,Ve)},i:Y,o:Y,d(P){P&&I(e),fe&&fe.d(),t[11](null),he&&he.d(),qe.d(),t[13](null),nt=!1,oe(vt)}}}function gn(t,e){var s=new FileReader;s.onload=function(n){e(n.target.result)},s.readAsDataURL(t)}const mn=()=>{};function kn(t,e,s){let{meInfo:n}=e,{socket:o}=e,i=!1,r=!1,a={name:"",profile:"",description:""},h,f,c;const p=()=>{i&&(s(4,a.name=c.textContent,a),s(4,a.profile=a.profile?a.profile:n.profile,a),s(4,a.description=h.textContent,a),o.emit("userDataEdit",{name:a.name,description:a.description,profile:a.profile,token:window.localStorage.getItem("token")})),s(2,i=!i)};function k(){f=this.files,s(1,f)}const b=()=>s(6,c.textContent=c.textContent.replace(`
`,""),c);function g(y){ve[y?"unshift":"push"](()=>{c=y,s(6,c)})}const w=()=>navigator.clipboard.writeText(`${n.name}`);function C(y){ve[y?"unshift":"push"](()=>{h=y,s(5,h)})}const x=()=>navigator.clipboard.writeText(`${Object.keys(n).length!=0?n.name:""}`),u=()=>s(3,r=!r);return t.$$set=y=>{"meInfo"in y&&s(0,n=y.meInfo),"socket"in y&&s(8,o=y.socket)},t.$$.update=()=>{t.$$.dirty&2&&f&&gn(f[0],y=>s(4,a.profile=y,a))},[n,f,i,r,a,h,c,p,o,k,b,g,w,C,x,u]}class bn extends xe{constructor(e){super(),we(this,e,kn,vn,le,{meInfo:0,socket:8})}}const{window:yn}=He;function Ut(t,e,s){const n=t.slice();return n[23]=e[s],n}function Kt(t,e,s){const n=t.slice();return n[26]=e[s],n}function Wt(t,e,s){const n=t.slice();return n[29]=e[s],n[31]=s,n}function _n(t){var u,y,m,q,D,B;let e,s,n,o,i=(t[0].find(C)?t[0].find(x).name:"")+"",r,a,h,f=t[7](t[29].timestamp)+"",c,p,k,b=((B=(D=(q=(m=(y=(u=t[29])==null?void 0:u.content)==null?void 0:y.replace(/&/g,"&amp;"))==null?void 0:m.replace(/ /g,"&nbsp;"))==null?void 0:q.replace(/</g,"&lt;"))==null?void 0:D.replace(/>/g,"&gt;"))==null?void 0:B.replace(/\n/g,"<br>"))+"";function g(...T){return t[13](t[29],...T)}function w(...T){return t[14](t[29],...T)}function C(...T){return t[15](t[29],...T)}function x(...T){return t[16](t[29],...T)}return{c(){e=_("div"),s=S(),n=_("div"),o=_("b"),r=W(i),a=S(),h=_("b"),c=W(f),p=S(),k=_("p"),z(e,"background-image","url("+(t[0].find(g)?t[0].find(w).profile:"")+")"),l(e,"class","svelte-o1rfoj"),l(o,"class","svelte-o1rfoj"),l(h,"class","svelte-o1rfoj"),l(k,"class","svelte-o1rfoj"),l(n,"class","svelte-o1rfoj")},m(T,M){E(T,e,M),E(T,s,M),E(T,n,M),d(n,o),d(o,r),d(n,a),d(n,h),d(h,c),d(n,p),d(n,k),k.innerHTML=b},p(T,M){var v,A,N,L,J,te;t=T,M[0]&9&&z(e,"background-image","url("+(t[0].find(g)?t[0].find(w).profile:"")+")"),M[0]&9&&i!==(i=(t[0].find(C)?t[0].find(x).name:"")+"")&&ee(r,i),M[0]&8&&f!==(f=t[7](t[29].timestamp)+"")&&ee(c,f),M[0]&8&&b!==(b=((te=(J=(L=(N=(A=(v=t[29])==null?void 0:v.content)==null?void 0:A.replace(/&/g,"&amp;"))==null?void 0:N.replace(/ /g,"&nbsp;"))==null?void 0:L.replace(/</g,"&lt;"))==null?void 0:J.replace(/>/g,"&gt;"))==null?void 0:te.replace(/\n/g,"<br>"))+"")&&(k.innerHTML=b)},d(T){T&&I(e),T&&I(s),T&&I(n)}}}function wn(t){var n,o,i,r,a,h;let e,s=((h=(a=(r=(i=(o=(n=t[29])==null?void 0:n.content)==null?void 0:o.replace(/&/g,"&amp;"))==null?void 0:i.replace(/ /g,"&nbsp;"))==null?void 0:r.replace(/</g,"&lt;"))==null?void 0:a.replace(/>/g,"&gt;"))==null?void 0:h.replace(/\n/g,"<br>"))+"";return{c(){e=_("p"),l(e,"class","svelte-o1rfoj")},m(f,c){E(f,e,c),e.innerHTML=s},p(f,c){var p,k,b,g,w,C;c[0]&8&&s!==(s=((C=(w=(g=(b=(k=(p=f[29])==null?void 0:p.content)==null?void 0:k.replace(/&/g,"&amp;"))==null?void 0:b.replace(/ /g,"&nbsp;"))==null?void 0:g.replace(/</g,"&lt;"))==null?void 0:w.replace(/>/g,"&gt;"))==null?void 0:C.replace(/\n/g,"<br>"))+"")&&(e.innerHTML=s)},d(f){f&&I(e)}}}function Yt(t){let e;return{c(){e=_("br"),l(e,"class","svelte-o1rfoj")},m(s,n){E(s,e,n)},d(s){s&&I(e)}}}function Jt(t){let e,s,n,o=t[31]+1!=t[3].length&&t[3][t[31]+1].userId!=t[29].userId||t[31]+1!=t[3].length&&new Date(t[29].timestamp).getMinutes()-new Date(t[3][t[31]+1].timestamp).getMinutes()!=0,i;function r(c,p){return p[0]&8&&(s=null),s==null&&(s=c[31]!=0&&c[3][c[31]-1].userId==c[29].userId&&c[31]!=0&&new Date(c[29].timestamp).getMinutes()-new Date(c[3][c[31]-1].timestamp).getMinutes()==0),s?wn:_n}let a=r(t,[-1,-1]),h=a(t),f=o&&Yt();return{c(){e=_("div"),h.c(),n=S(),f&&f.c(),i=be(),l(e,"class","chating svelte-o1rfoj")},m(c,p){E(c,e,p),h.m(e,null),E(c,n,p),f&&f.m(c,p),E(c,i,p)},p(c,p){a===(a=r(c,p))&&h?h.p(c,p):(h.d(1),h=a(c),h&&(h.c(),h.m(e,null))),p[0]&8&&(o=c[31]+1!=c[3].length&&c[3][c[31]+1].userId!=c[29].userId||c[31]+1!=c[3].length&&new Date(c[29].timestamp).getMinutes()-new Date(c[3][c[31]+1].timestamp).getMinutes()!=0),o?f||(f=Yt(),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(c){c&&I(e),h.d(),c&&I(n),f&&f.d(c),c&&I(i)}}}function Xt(t){var x;let e,s,n,o,i,r,a,h,f,c,p,k,b,g,w=(x=t[4])==null?void 0:x.inviteCode,C=[];for(let u=0;u<w.length;u+=1)C[u]=Gt(Kt(t,w,u));return{c(){var u,y,m,q;e=_("div"),s=_("div"),n=R("svg"),o=R("path"),i=S(),r=_("p"),r.textContent="inviteCode",a=S(),h=_("div"),f=R("svg"),c=R("path"),k=S();for(let D=0;D<C.length;D+=1)C[D].c();l(o,"fill","#000"),l(o,"d","M7.38 21.01c.49.49 1.28.49 1.77 0l8.31-8.31a.996.996 0 0 0 0-1.41L9.15 2.98a1.25 1.25 0 0 0-1.77 0 1.25 1.25 0 0 0 0 1.77L14.62 12l-7.25 7.25c-.48.48-.48 1.28.01 1.76Z"),l(o,"class","svelte-o1rfoj"),z(n,"transform",t[6]?"rotate(0deg)":"rotate(90deg)"),l(n,"xmlns","http://www.w3.org/2000/svg"),l(n,"width","10"),l(n,"height","10"),l(n,"fill","none"),l(n,"viewBox","0 0 24 24"),l(n,"class","svelte-o1rfoj"),z(r,"display","inline-block"),l(r,"class","svelte-o1rfoj"),l(s,"class","svelte-o1rfoj"),l(c,"fill","#000"),l(c,"d","M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1Z"),l(c,"class","svelte-o1rfoj"),l(f,"xmlns","http://www.w3.org/2000/svg"),l(f,"width","15"),l(f,"height","15"),l(f,"fill","none"),l(f,"viewBox","0 0 24 25"),l(f,"class","svelte-o1rfoj"),l(h,"class",p="addinvite "+(t[6]?"disable":"")+" svelte-o1rfoj"),l(e,"class","inviteCode svelte-o1rfoj"),z(e,"max-height",t[6]?"28px":`${3166*((y=(u=t[4])==null?void 0:u.inviteCode)==null?void 0:y.length)/100+28+12*((q=(m=t[4])==null?void 0:m.inviteCode)!=null&&q.length?1:0)}px`)},m(u,y){E(u,e,y),d(e,s),d(s,n),d(n,o),d(s,i),d(s,r),d(e,a),d(e,h),d(h,f),d(f,c),d(e,k);for(let m=0;m<C.length;m+=1)C[m].m(e,null);b||(g=[O(s,"click",t[18]),O(h,"click",t[9])],b=!0)},p(u,y){var m,q,D,B,T;if(y[0]&64&&z(n,"transform",u[6]?"rotate(0deg)":"rotate(90deg)"),y[0]&64&&p!==(p="addinvite "+(u[6]?"disable":"")+" svelte-o1rfoj")&&l(h,"class",p),y[0]&1040){w=(m=u[4])==null?void 0:m.inviteCode;let M;for(M=0;M<w.length;M+=1){const v=Kt(u,w,M);C[M]?C[M].p(v,y):(C[M]=Gt(v),C[M].c(),C[M].m(e,null))}for(;M<C.length;M+=1)C[M].d(1);C.length=w.length}y[0]&80&&z(e,"max-height",u[6]?"28px":`${3166*((D=(q=u[4])==null?void 0:q.inviteCode)==null?void 0:D.length)/100+28+12*((T=(B=u[4])==null?void 0:B.inviteCode)!=null&&T.length?1:0)}px`)},d(u){u&&I(e),Ae(C,u),b=!1,oe(g)}}}function Gt(t){let e,s=t[26]+"",n,o,i,r,a,h,f,c,p,k;function b(){return t[19](t[26])}function g(){return t[20](t[26])}return{c(){e=_("div"),n=W(s),o=S(),i=R("svg"),r=R("path"),a=S(),h=R("svg"),f=R("path"),c=S(),l(r,"fill","#000"),l(r,"d","M2.895.545c0-.3.244-.545.545-.545h6.402C10.48 0 11 .49 11 1.09v7.058a.579.579 0 1 1-1.158 0V2.091a1 1 0 0 0-1-1H3.44a.545.545 0 0 1-.545-.546ZM1.158 2.182h6.368c.637 0 1.158.49 1.158 1.09v7.637c0 .6-.52 1.091-1.158 1.091H1.158C.52 12 0 11.51 0 10.91V3.272c0-.6.521-1.091 1.158-1.091Zm0 7.727a1 1 0 0 0 1 1h4.368a1 1 0 0 0 1-1V4.273a1 1 0 0 0-1-1H2.158a1 1 0 0 0-1 1v5.636Z"),l(r,"class","svelte-o1rfoj"),l(i,"class","invitecopy svelte-o1rfoj"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"width","15"),l(i,"height","15"),l(i,"fill","none"),l(i,"viewBox","-2 -2 16 16"),l(f,"fill","#000"),l(f,"d","M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59 7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12 5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4Z"),l(f,"class","svelte-o1rfoj"),l(h,"class","inviteDelete svelte-o1rfoj"),l(h,"xmlns","http://www.w3.org/2000/svg"),l(h,"width","15"),l(h,"height","15"),l(h,"fill","none"),l(h,"viewBox","0 0 24 24"),l(e,"class","inviteCodes svelte-o1rfoj")},m(w,C){E(w,e,C),d(e,n),d(e,o),d(e,i),d(i,r),d(e,a),d(e,h),d(h,f),d(e,c),p||(k=[O(i,"click",b),O(h,"click",g)],p=!0)},p(w,C){t=w,C[0]&16&&s!==(s=t[26]+"")&&ee(n,s)},d(w){w&&I(e),p=!1,oe(k)}}}function xn(t){let e,s=t[0],n=[];for(let o=0;o<s.length;o+=1)n[o]=$t(Ut(t,s,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=be()},m(o,i){for(let r=0;r<n.length;r+=1)n[r].m(o,i);E(o,e,i)},p(o,i){if(i[0]&261){s=o[0];let r;for(r=0;r<s.length;r+=1){const a=Ut(o,s,r);n[r]?n[r].p(a,i):(n[r]=$t(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(o){Ae(n,o),o&&I(e)}}}function Qt(t){let e,s,n,o;function i(){return t[21](t[23])}return{c(){e=R("svg"),s=R("path"),l(s,"fill","#000"),l(s,"d","M20 2H4c-1.1 0-2 .9-2 2v16.793a.5.5 0 0 0 .854.353l3-3A.5.5 0 0 1 6.207 18H20c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2Z"),l(s,"class","svelte-o1rfoj"),l(e,"class","openDM svelte-o1rfoj"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"width","20"),l(e,"height","20"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24")},m(r,a){E(r,e,a),d(e,s),n||(o=O(e,"click",i),n=!0)},p(r,a){t=r},d(r){r&&I(e),n=!1,o()}}}function $t(t){var p,k;let e,s,n,o,i=((p=t[23])==null?void 0:p.name)+"",r,a,h=((k=t[23])==null?void 0:k.userId)!=t[2].userId&&location.hash.replace("#/","").split("/")[0]!="DM",f,c=h&&Qt(t);return{c(){var b;e=_("div"),s=_("div"),n=S(),o=_("p"),r=W(i),a=S(),c&&c.c(),f=S(),z(s,"background-image","url("+((b=t[23])==null?void 0:b.profile)+")"),l(s,"class","svelte-o1rfoj"),l(o,"class","svelte-o1rfoj"),l(e,"class","user svelte-o1rfoj")},m(b,g){E(b,e,g),d(e,s),d(e,n),d(e,o),d(o,r),d(e,a),c&&c.m(e,null),d(e,f)},p(b,g){var w,C,x;g[0]&1&&z(s,"background-image","url("+((w=b[23])==null?void 0:w.profile)+")"),g[0]&1&&i!==(i=((C=b[23])==null?void 0:C.name)+"")&&ee(r,i),g[0]&5&&(h=((x=b[23])==null?void 0:x.userId)!=b[2].userId&&location.hash.replace("#/","").split("/")[0]!="DM"),h?c?c.p(b,g):(c=Qt(b),c.c(),c.m(e,f)):c&&(c.d(1),c=null)},d(b){b&&I(e),c&&c.d()}}}function es(t){let e=t[4]?location.hash.replace("#/","").split("/")[0]!="DM"&&t[4].administration.includes(t[2].userId):!1,s,n=!(location.hash.replace("#/","").split("/")[0]=="DM"&&location.hash.replace("#/","").split("/")[1]=="main"),o,i=e&&Xt(t),r=n&&xn(t);return{c(){i&&i.c(),s=S(),r&&r.c(),o=be()},m(a,h){i&&i.m(a,h),E(a,s,h),r&&r.m(a,h),E(a,o,h)},p(a,h){h[0]&20&&(e=a[4]?location.hash.replace("#/","").split("/")[0]!="DM"&&a[4].administration.includes(a[2].userId):!1),e?i?i.p(a,h):(i=Xt(a),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null),n&&r.p(a,h)},d(a){i&&i.d(a),a&&I(s),r&&r.d(a),a&&I(o)}}}function Cn(t){let e,s,n,o,i,r,a,h,f=t[3]&&t[0],c,p,k,b,g=t[3],w=[];for(let x=0;x<g.length;x+=1)w[x]=Jt(Wt(t,g,x));let C=es(t);return{c(){e=_("div"),s=_("div");for(let x=0;x<w.length;x+=1)w[x].c();n=S(),o=R("svg"),i=R("path"),r=S(),a=_("div"),h=_("div"),C.c(),l(s,"class","svelte-o1rfoj"),l(i,"fill","#FFF"),l(i,"d","M2.477.707a1 1 0 0 0-1.414 0l-.356.356a1 1 0 0 0 0 1.414l8.586 8.586a1 1 0 0 0 1.414 0l8.586-8.586a1 1 0 0 0 0-1.414l-.356-.356a1 1 0 0 0-1.414 0l-6.816 6.816a1 1 0 0 1-1.414 0L2.477.707Z"),l(i,"class","svelte-o1rfoj"),l(o,"class","top-button svelte-o1rfoj"),z(o,"right",(t[1]?"270":"20")+"px"),l(o,"width","10"),l(o,"height","10"),l(o,"fill","none"),l(o,"viewBox","0 0 20 15"),l(o,"xmlns","http://www.w3.org/2000/svg"),l(h,"class","svelte-o1rfoj"),l(a,"style",c=t[1]?"width: 250px":"width: 0px;"),l(a,"class","svelte-o1rfoj"),l(e,"class","chatContainer svelte-o1rfoj"),l(e,"style",p=t[1]?"width: calc(100% - 271px);":"width: calc(100% - 21px);")},m(x,u){E(x,e,u),d(e,s);for(let y=0;y<w.length;y+=1)w[y].m(s,null);d(e,n),d(e,o),d(o,i),d(e,r),d(e,a),d(a,h),C.m(h,null),t[22](e),k||(b=[O(yn,"load",t[11]),O(o,"click",t[17])],k=!0)},p(x,u){if(u[0]&137){g=x[3];let y;for(y=0;y<g.length;y+=1){const m=Wt(x,g,y);w[y]?w[y].p(m,u):(w[y]=Jt(m),w[y].c(),w[y].m(s,null))}for(;y<w.length;y+=1)w[y].d(1);w.length=g.length}u[0]&2&&z(o,"right",(x[1]?"270":"20")+"px"),u[0]&9&&le(f,f=x[3]&&x[0])?(C.d(1),C=es(x),C.c(),C.m(h,null)):C.p(x,u),u[0]&2&&c!==(c=x[1]?"width: 250px":"width: 0px;")&&l(a,"style",c),u[0]&2&&p!==(p=x[1]?"width: calc(100% - 271px);":"width: calc(100% - 21px);")&&l(e,"style",p)},i:Y,o:Y,d(x){x&&I(e),Ae(w,x),C.d(x),t[22](null),k=!1,oe(b)}}}function In(t,e,s){let{usersData:n}=e,{sideMenuOn:o}=e,{meInfo:i}=e,{chatsData:r}=e,{currentServer:a}=e,{socket:h}=e,f=!1,c;const p=v=>{let A=new Date(v);return`${A.getFullYear()}/${A.getMonth()}/${A.getDate()} ${A.getHours()}:${A.getMinutes()}`},k=v=>{h.emit("openDM",{userId:v,token:window.localStorage.getItem("token")})},b=()=>{h.emit("createInviteCode",{serverId:a.serverId,token:window.localStorage.getItem("token")})},g=v=>{h.emit("deleteInviteCode",{serverId:a.serverId,inviteCode:v,token:window.localStorage.getItem("token")})};function w(){setTimeout(()=>{try{c.scrollTo(0,c.scrollHeight)}catch{}})}const C=(v,A)=>A.userId==v.userId,x=(v,A)=>A.userId==v.userId,u=(v,A)=>A.userId==v.userId,y=(v,A)=>A.userId==(v==null?void 0:v.userId),m=()=>{c.scrollBy({top:c.scrollHeight,left:0,behavior:"smooth"})},q=()=>s(6,f=!f),D=v=>navigator.clipboard.writeText(`${location.origin}${location.pathname}#invite/${v}`),B=v=>g(v),T=v=>k(v==null?void 0:v.userId);function M(v){ve[v?"unshift":"push"](()=>{c=v,s(5,c)})}return t.$$set=v=>{"usersData"in v&&s(0,n=v.usersData),"sideMenuOn"in v&&s(1,o=v.sideMenuOn),"meInfo"in v&&s(2,i=v.meInfo),"chatsData"in v&&s(3,r=v.chatsData),"currentServer"in v&&s(4,a=v.currentServer),"socket"in v&&s(12,h=v.socket)},t.$$.update=()=>{t.$$.dirty[0]&44&&(c&&c.scrollHeight-c.scrollTop-c.clientHeight<=30||r.length!=0&&i&&r[r.length-1].userId==i.userId)&&w()},[n,o,i,r,a,c,f,p,k,b,g,w,h,C,x,u,y,m,q,D,B,T,M]}class qn extends xe{constructor(e){super(),we(this,e,In,Cn,le,{usersData:0,sideMenuOn:1,meInfo:2,chatsData:3,currentServer:4,socket:12},null,[-1,-1])}}function Ln(t){let e,s,n,o,i,r,a,h,f;return{c(){e=_("div"),s=_("button"),s.innerHTML='<svg width="20" height="20" fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="svelte-aoa2ez"><path fill="#000" d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0Zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2Z" class="svelte-aoa2ez"></path></svg>',n=S(),o=_("div"),i=_("textarea"),r=S(),a=_("button"),a.innerHTML='<svg width="18" height="18" fill="none" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" class="svelte-aoa2ez"><path fill="#000" d="M12.735 21.57 21.213.364.007 8.842 4.95 13.8l12.02-9.193-9.192 12.021 4.957 4.943Z" class="svelte-aoa2ez"></path></svg>',l(s,"class","chatMenu svelte-aoa2ez"),l(i,"spellcheck","false"),l(i,"class","chatInput svelte-aoa2ez"),l(i,"maxlength","4000"),l(i,"type","text"),i.autofocus=!0,l(o,"class","chatBox svelte-aoa2ez"),l(a,"class","chatSendButton svelte-aoa2ez"),l(e,"class","inputContainer svelte-aoa2ez")},m(c,p){E(c,e,p),d(e,s),d(e,n),d(e,o),d(o,i),Ee(i,t[0]),d(e,r),d(e,a),i.focus(),h||(f=[O(s,"click",t[2]),O(i,"keydown",t[3]),O(i,"input",t[6]),O(a,"click",t[1])],h=!0)},p(c,[p]){p&1&&Ee(i,c[0])},i:Y,o:Y,d(c){c&&I(e),h=!1,oe(f)}}}function jn(t,e,s){let{socket:n}=e,{currentCategory:o}=e,i="";const r=()=>{i&&(location.hash.replace("#/","").split("/")[0]=="DM"?n.emit("DMChat",{token:window.localStorage.getItem("token"),userId:Number(location.hash.replace("#/","").split("/")[1]),content:i,contentType:"text"}):n.emit("chat",{token:window.localStorage.getItem("token"),serverId:Number(location.hash.replace("#/","").split("/")[0]),categoryId:o.categoryId,channelId:Number(location.hash.replace("#/","").split("/")[1]),content:i,contentType:"text"})),s(0,i="")},a=()=>{console.log("menu opened")},h=c=>{!c.shiftKey&&c.keyCode==13&&(c.preventDefault(),r())};function f(){i=this.value,s(0,i)}return t.$$set=c=>{"socket"in c&&s(4,n=c.socket),"currentCategory"in c&&s(5,o=c.currentCategory)},[i,r,a,h,n,o,f]}class En extends xe{constructor(e){super(),we(this,e,jn,Ln,le,{socket:4,currentCategory:5})}}const{window:Sn}=He;function ts(t){let e,s,n,o,i,r,a,h,f,c,p,k,b;return{c(){e=_("p"),e.textContent="check password",s=S(),n=_("input"),i=S(),r=_("div"),a=R("svg"),h=R("path"),c=S(),p=_("br"),l(e,"class","svelte-14yy6m9"),l(n,"type","password"),l(n,"autocomplete","true"),n.required=!0,l(n,"class",o=ie(t[3]?t[3]==t[4]?"green":"red":"white")+" svelte-14yy6m9"),l(h,"fill","#000"),l(h,"d",f=t[1]?t[1].type=="text"?t[9].off:t[9].on:t[9].off),l(a,"xmlns","http://www.w3.org/2000/svg"),l(a,"width","20"),l(a,"height","20"),l(a,"fill","none"),l(a,"viewBox","0 0 24 22"),l(r,"class","pwv svelte-14yy6m9")},m(g,w){E(g,e,w),E(g,s,w),E(g,n,w),Ee(n,t[3]),t[21](n),E(g,i,w),E(g,r,w),d(r,a),d(a,h),d(r,c),E(g,p,w),k||(b=[O(n,"input",t[19]),O(n,"keydown",t[20]),O(r,"click",t[22])],k=!0)},p(g,w){w&24&&o!==(o=ie(g[3]?g[3]==g[4]?"green":"red":"white")+" svelte-14yy6m9")&&l(n,"class",o),w&8&&n.value!==g[3]&&Ee(n,g[3]),w&2&&f!==(f=g[1]?g[1].type=="text"?g[9].off:g[9].on:g[9].off)&&l(h,"d",f)},d(g){g&&I(e),g&&I(s),g&&I(n),t[21](null),g&&I(i),g&&I(r),g&&I(p),k=!1,oe(b)}}}function Mn(t){let e,s,n,o=t[2]?"Sign in":"Sign up",i,r,a,h=t[2]?"\uD68C\uC6D0\uAC00\uC785":"\uB85C\uADF8\uC778",f,c,p,k,b,g,w,C,x,u,y,m,q,D,B,T,M,v,A,N,L,J,te,K,U,G=t[2]?"\uB85C\uADF8\uC778":"\uD68C\uC6D0\uAC00\uC785",ae,X,ce,ge,Q=!t[2]&&ts(t);return{c(){e=_("div"),s=_("div"),n=_("b"),i=W(o),r=S(),a=_("div"),f=W(h),c=S(),p=_("p"),p.textContent="email",k=S(),b=_("input"),w=S(),C=_("p"),C.textContent="password",x=S(),u=_("input"),m=S(),q=_("div"),D=R("svg"),B=R("path"),M=S(),v=_("br"),A=S(),Q&&Q.c(),N=S(),L=_("div"),J=W(t[6]),K=S(),U=_("button"),ae=W(G),l(n,"class","svelte-14yy6m9"),l(a,"class","chm svelte-14yy6m9"),l(p,"class","svelte-14yy6m9"),l(b,"type","email"),l(b,"autocomplete","true"),b.required=!0,b.autofocus=!0,l(b,"class",g=ie(t[5]?t[5].match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?"green":"red":"white")+" svelte-14yy6m9"),l(C,"class","svelte-14yy6m9"),l(u,"type","password"),l(u,"autocomplete","true"),u.required=!0,l(u,"class",y=ie(t[4]?"green":"white")+" svelte-14yy6m9"),l(B,"fill","#000"),l(B,"d",T=t[0]?t[0].type=="text"?t[9].off:t[9].on:t[9].off),l(D,"xmlns","http://www.w3.org/2000/svg"),l(D,"width","20"),l(D,"height","20"),l(D,"fill","none"),l(D,"viewBox","0 0 24 22"),l(q,"class","pwv svelte-14yy6m9"),l(L,"class",te="errorMessage "+(t[6]?"error":"")+" svelte-14yy6m9"),l(U,"class",X=ie(t[5].match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&t[4]&&(t[2]||t[3]==t[4])?"vaild":"")+" svelte-14yy6m9"),l(s,"class","form svelte-14yy6m9"),l(e,"class","display svelte-14yy6m9")},m(V,F){E(V,e,F),d(e,s),d(s,n),d(n,i),d(s,r),d(s,a),d(a,f),d(s,c),d(s,p),d(s,k),d(s,b),Ee(b,t[5]),d(s,w),d(s,C),d(s,x),d(s,u),Ee(u,t[4]),t[17](u),d(s,m),d(s,q),d(q,D),d(D,B),d(q,M),d(s,v),d(s,A),Q&&Q.m(s,null),d(s,N),d(s,L),d(L,J),d(s,K),d(s,U),d(U,ae),b.focus(),ce||(ge=[O(Sn,"hashchange",t[7]),O(a,"click",t[12]),O(b,"input",t[13]),O(b,"keydown",t[14]),O(u,"input",t[15]),O(u,"keydown",t[16]),O(q,"click",t[18]),O(U,"click",t[8])],ce=!0)},p(V,[F]){F&4&&o!==(o=V[2]?"Sign in":"Sign up")&&ee(i,o),F&4&&h!==(h=V[2]?"\uD68C\uC6D0\uAC00\uC785":"\uB85C\uADF8\uC778")&&ee(f,h),F&32&&g!==(g=ie(V[5]?V[5].match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?"green":"red":"white")+" svelte-14yy6m9")&&l(b,"class",g),F&32&&b.value!==V[5]&&Ee(b,V[5]),F&16&&y!==(y=ie(V[4]?"green":"white")+" svelte-14yy6m9")&&l(u,"class",y),F&16&&u.value!==V[4]&&Ee(u,V[4]),F&1&&T!==(T=V[0]?V[0].type=="text"?V[9].off:V[9].on:V[9].off)&&l(B,"d",T),V[2]?Q&&(Q.d(1),Q=null):Q?Q.p(V,F):(Q=ts(V),Q.c(),Q.m(s,N)),F&64&&ee(J,V[6]),F&64&&te!==(te="errorMessage "+(V[6]?"error":"")+" svelte-14yy6m9")&&l(L,"class",te),F&4&&G!==(G=V[2]?"\uB85C\uADF8\uC778":"\uD68C\uC6D0\uAC00\uC785")&&ee(ae,G),F&60&&X!==(X=ie(V[5].match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&V[4]&&(V[2]||V[3]==V[4])?"vaild":"")+" svelte-14yy6m9")&&l(U,"class",X)},i:Y,o:Y,d(V){V&&I(e),t[17](null),Q&&Q.d(),ce=!1,oe(ge)}}}function Bn(t,e,s){let{socket:n}=e,o,i,r,a="",h="",f="",c="";const p=()=>{s(2,r=location.hash=="#/sign-in")};p();const k=()=>{s(0,o.type="password",o);try{s(1,i.type="password",i)}catch{}s(6,c=""),n.emit(r?"signin":"signup",{email:f,password:h})},b=L=>{window.localStorage.setItem("token",L),location.hash="#/DM/main"},g=L=>{s(6,c=`${L}`)},w=L=>{s(6,c=`${L}`)};n.on("signin",L=>L.token?b(L.token):w(L.error)),n.on("signup",L=>L.token?b(L.token):g(L.error));const C={on:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4Zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5Zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3Z",off:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24ZM2.71 3.16a.996.996 0 0 0 0 1.41l1.97 1.97A11.892 11.892 0 0 0 1 11.5C2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72a.996.996 0 1 0 1.41-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0ZM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5Zm2.97-5.33a2.97 2.97 0 0 0-2.64-2.64l2.64 2.64Z"},x=(L,J)=>{L.keyCode==13&&(J=="email"&&o.focus(),J=="password"&&!r&&i.focus(),J=="password"&&r&&(o.blur(),k()),J=="pwcheck"&&(i.blur(),k()))},u=()=>location.hash=r?"#/sign-up":"#/sign-in";function y(){f=this.value,s(5,f)}const m=L=>x(L,"email");function q(){h=this.value,s(4,h)}const D=L=>x(L,"password");function B(L){ve[L?"unshift":"push"](()=>{o=L,s(0,o)})}const T=()=>s(0,o.type=o.type=="text"?"password":"text",o);function M(){a=this.value,s(3,a)}const v=L=>x(L,"pwcheck");function A(L){ve[L?"unshift":"push"](()=>{i=L,s(1,i)})}const N=()=>s(1,i.type=i.type=="text"?"password":"text",i);return t.$$set=L=>{"socket"in L&&s(11,n=L.socket)},[o,i,r,a,h,f,c,p,k,C,x,n,u,y,m,q,D,B,T,M,v,A,N]}class An extends xe{constructor(e){super(),we(this,e,Bn,Mn,le,{socket:11})}}const ke=Object.create(null);ke.open="0";ke.close="1";ke.ping="2";ke.pong="3";ke.message="4";ke.upgrade="5";ke.noop="6";const Je=Object.create(null);Object.keys(ke).forEach(t=>{Je[ke[t]]=t});const Dn={type:"error",data:"parser error"},Tn=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",On=typeof ArrayBuffer=="function",Nn=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,us=({type:t,data:e},s,n)=>Tn&&e instanceof Blob?s?n(e):ss(e,n):On&&(e instanceof ArrayBuffer||Nn(e))?s?n(e):ss(new Blob([e]),n):n(ke[t]+(e||"")),ss=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+n)},s.readAsDataURL(t)},ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<ns.length;t++)Re[ns.charCodeAt(t)]=t;const Rn=t=>{let e=t.length*.75,s=t.length,n,o=0,i,r,a,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),c=new Uint8Array(f);for(n=0;n<s;n+=4)i=Re[t.charCodeAt(n)],r=Re[t.charCodeAt(n+1)],a=Re[t.charCodeAt(n+2)],h=Re[t.charCodeAt(n+3)],c[o++]=i<<2|r>>4,c[o++]=(r&15)<<4|a>>2,c[o++]=(a&3)<<6|h&63;return f},zn=typeof ArrayBuffer=="function",ps=(t,e)=>{if(typeof t!="string")return{type:"message",data:vs(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:Hn(t.substring(1),e)}:Je[s]?t.length>1?{type:Je[s],data:t.substring(1)}:{type:Je[s]}:Dn},Hn=(t,e)=>{if(zn){const s=Rn(t);return vs(s,e)}else return{base64:!0,data:t}},vs=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},gs=String.fromCharCode(30),Vn=(t,e)=>{const s=t.length,n=new Array(s);let o=0;t.forEach((i,r)=>{us(i,!1,a=>{n[r]=a,++o===s&&e(n.join(gs))})})},Pn=(t,e)=>{const s=t.split(gs),n=[];for(let o=0;o<s.length;o++){const i=ps(s[o],e);if(n.push(i),i.type==="error")break}return n},ms=4;function se(t){if(t)return Zn(t)}function Zn(t){for(var e in se.prototype)t[e]=se.prototype[e];return t}se.prototype.on=se.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};se.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};se.prototype.off=se.prototype.removeListener=se.prototype.removeAllListeners=se.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,o=0;o<s.length;o++)if(n=s[o],n===e||n.fn===e){s.splice(o,1);break}return s.length===0&&delete this._callbacks["$"+t],this};se.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,o=s.length;n<o;++n)s[n].apply(this,e)}return this};se.prototype.emitReserved=se.prototype.emit;se.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};se.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Se=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function ks(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const Fn=setTimeout,Un=clearTimeout;function tt(t,e){e.useNativeTimers?(t.setTimeoutFn=Fn.bind(Se),t.clearTimeoutFn=Un.bind(Se)):(t.setTimeoutFn=setTimeout.bind(Se),t.clearTimeoutFn=clearTimeout.bind(Se))}const Kn=1.33;function Wn(t){return typeof t=="string"?Yn(t):Math.ceil((t.byteLength||t.size)*Kn)}function Yn(t){let e=0,s=0;for(let n=0,o=t.length;n<o;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}class Jn extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class bs extends se{constructor(e){super(),this.writable=!1,tt(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,s,n){return super.emitReserved("error",new Jn(e,s,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=ps(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const ys="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),lt=64,Xn={};let os=0,Ue=0,is;function ls(t){let e="";do e=ys[t%lt]+e,t=Math.floor(t/lt);while(t>0);return e}function _s(){const t=ls(+new Date);return t!==is?(os=0,is=t):t+"."+ls(os++)}for(;Ue<lt;Ue++)Xn[ys[Ue]]=Ue;function ws(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function Gn(t){let e={},s=t.split("&");for(let n=0,o=s.length;n<o;n++){let i=s[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}let xs=!1;try{xs=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Qn=xs;function Cs(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Qn))return new XMLHttpRequest}catch{}if(!e)try{return new Se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function $n(){}const eo=function(){return new Cs({xdomain:!1}).responseType!=null}();class to extends bs{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==n}const s=e&&e.forceBase64;this.supportsBinary=eo&&!s}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Pn(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Vn(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const s=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=_s()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(s==="https"&&Number(this.opts.port)!==443||s==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const o=ws(e),i=this.opts.hostname.indexOf(":")!==-1;return s+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(o.length?"?"+o:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new me(this.uri(),e)}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class me extends se{constructor(e,s){super(),tt(this,s),this.opts=s,this.method=s.method||"GET",this.uri=e,this.async=s.async!==!1,this.data=s.data!==void 0?s.data:null,this.create()}create(){const e=ks(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const s=this.xhr=new Cs(e);try{s.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&s.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{s.readyState===4&&(s.status===200||s.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof s.status=="number"?s.status:0)},0))},s.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document!="undefined"&&(this.index=me.requestsCount++,me.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=$n,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete me.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}me.requestsCount=0;me.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",rs);else if(typeof addEventListener=="function"){const t="onpagehide"in Se?"pagehide":"unload";addEventListener(t,rs,!1)}}function rs(){for(let t in me.requests)me.requests.hasOwnProperty(t)&&me.requests[t].abort()}const so=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0))(),Ke=Se.WebSocket||Se.MozWebSocket,as=!0,no="arraybuffer",cs=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class oo extends bs{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),s=this.opts.protocols,n=cs?{}:ks(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=as&&!cs?s?new Ke(e,s):new Ke(e):new Ke(e,s,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||no,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],o=s===e.length-1;us(n,this.supportsBinary,i=>{const r={};try{as&&this.ws.send(i)}catch{}o&&so(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const s=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(s==="wss"&&Number(this.opts.port)!==443||s==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=_s()),this.supportsBinary||(e.b64=1);const o=ws(e),i=this.opts.hostname.indexOf(":")!==-1;return s+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(o.length?"?"+o:"")}check(){return!!Ke}}const io={websocket:oo,polling:to},lo=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ro=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rt(t){const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let o=lo.exec(t||""),i={},r=14;for(;r--;)i[ro[r]]=o[r]||"";return s!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ao(i,i.path),i.queryKey=co(i,i.query),i}function ao(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&n.splice(0,1),e.substr(e.length-1,1)=="/"&&n.splice(n.length-1,1),n}function co(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,i){o&&(s[o]=i)}),s}class je extends se{constructor(e,s={}){super(),e&&typeof e=="object"&&(s=e,e=null),e?(e=rt(e),s.hostname=e.host,s.secure=e.protocol==="https"||e.protocol==="wss",s.port=e.port,e.query&&(s.query=e.query)):s.host&&(s.hostname=rt(s.host).host),tt(this,s),this.secure=s.secure!=null?s.secure:typeof location!="undefined"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=s.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=s.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},s),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Gn(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=ms,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new io[e](n)}open(){let e;if(this.opts.rememberUpgrade&&je.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",s=>this.onClose("transport close",s))}probe(e){let s=this.createTransport(e),n=!1;je.priorWebsocketSuccess=!1;const o=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;je.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(c(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=s.name,this.emitReserved("upgradeError",k)}}))};function i(){n||(n=!0,c(),s.close(),s=null)}const r=p=>{const k=new Error("probe error: "+p);k.transport=s.name,i(),this.emitReserved("upgradeError",k)};function a(){r("transport closed")}function h(){r("socket closed")}function f(p){s&&p.name!==s.name&&i()}const c=()=>{s.removeListener("open",o),s.removeListener("error",r),s.removeListener("close",a),this.off("close",h),this.off("upgrading",f)};s.once("open",o),s.once("error",r),s.once("close",a),this.once("close",h),this.once("upgrading",f),s.open()}onOpen(){if(this.readyState="open",je.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const s=this.upgrades.length;for(;e<s;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const s=new Error("server error");s.code=e.data,this.onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(s+=Wn(o)),n>0&&s>this.maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}write(e,s,n){return this.sendPacket("message",e,s,n),this}send(e,s,n){return this.sendPacket("message",e,s,n),this}sendPacket(e,s,n,o){if(typeof s=="function"&&(o=s,s=void 0),typeof n=="function"&&(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:s,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){je.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,s){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const s=[];let n=0;const o=e.length;for(;n<o;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}je.protocol=ms;function fo(t,e="",s){let n=t;s=s||typeof location!="undefined"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s!="undefined"?t=s.protocol+"//"+t:t="https://"+t),n=rt(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(s&&s.port===n.port?"":":"+n.port),n}const ho=typeof ArrayBuffer=="function",uo=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Is=Object.prototype.toString,po=typeof Blob=="function"||typeof Blob!="undefined"&&Is.call(Blob)==="[object BlobConstructor]",vo=typeof File=="function"||typeof File!="undefined"&&Is.call(File)==="[object FileConstructor]";function dt(t){return ho&&(t instanceof ArrayBuffer||uo(t))||po&&t instanceof Blob||vo&&t instanceof File}function Xe(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(Xe(t[s]))return!0;return!1}if(dt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Xe(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Xe(t[s]))return!0;return!1}function go(t){const e=[],s=t.data,n=t;return n.data=at(s,e),n.attachments=e.length,{packet:n,buffers:e}}function at(t,e){if(!t)return t;if(dt(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=at(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=at(t[n],e));return s}return t}function mo(t,e){return t.data=ct(t.data,e),t.attachments=void 0,t}function ct(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=ct(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=ct(t[s],e));return t}const ko=5;var Z;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));class bo{constructor(e){this.replacer=e}encode(e){return(e.type===Z.EVENT||e.type===Z.ACK)&&Xe(e)?(e.type=e.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===Z.BINARY_EVENT||e.type===Z.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=go(e),n=this.encodeAsString(s.packet),o=s.buffers;return o.unshift(n),o}}class ut extends se{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e),s.type===Z.BINARY_EVENT||s.type===Z.BINARY_ACK?(this.reconstructor=new yo(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(dt(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(Z[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Z.BINARY_EVENT||n.type===Z.BINARY_ACK){const i=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const r=e.substring(i,s);if(r!=Number(r)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(r)}if(e.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(i,s)}else n.nsp="/";const o=e.charAt(s+1);if(o!==""&&Number(o)==o){const i=s+1;for(;++s;){const r=e.charAt(s);if(r==null||Number(r)!=r){--s;break}if(s===e.length)break}n.id=Number(e.substring(i,s+1))}if(e.charAt(++s)){const i=this.tryParse(e.substr(s));if(ut.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case Z.CONNECT:return typeof s=="object";case Z.DISCONNECT:return s===void 0;case Z.CONNECT_ERROR:return typeof s=="string"||typeof s=="object";case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(s)&&s.length>0;case Z.ACK:case Z.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class yo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=mo(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var _o=Object.freeze(Object.defineProperty({__proto__:null,protocol:ko,get PacketType(){return Z},Encoder:bo,Decoder:ut},Symbol.toStringTag,{value:"Module"}));function ue(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const wo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qs extends se{constructor(e,s,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ue(e,"open",this.onopen.bind(this)),ue(e,"packet",this.onpacket.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){if(wo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');s.unshift(e);const n={type:Z.EVENT,data:s};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const r=this.ids++,a=s.pop();this._registerAckCallback(r,a),n.id=r}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,s){const n=this.flags.timeout;if(n===void 0){this.acks[e]=s;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);s.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(o),s.apply(this,[null,...i])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:Z.CONNECT,data:e})}):this.packet({type:Z.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Z.CONNECT:if(e.data&&e.data.sid){const o=e.data.sid;this.onconnect(o)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(e);break;case Z.ACK:case Z.BINARY_ACK:this.onack(e);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const s=this;let n=!1;return function(...o){n||(n=!0,s.packet({type:Z.ACK,id:e,data:o}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(s.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function De(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}De.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};De.prototype.reset=function(){this.attempts=0};De.prototype.setMin=function(t){this.ms=t};De.prototype.setMax=function(t){this.max=t};De.prototype.setJitter=function(t){this.jitter=t};class ft extends se{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,tt(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new De({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const o=s.parser||_o;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new je(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=ue(s,"open",function(){n.onopen(),e&&e()}),i=ue(s,"error",r=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",r),e?e(r):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const r=this._timeout;r===0&&o();const a=this.setTimeoutFn(()=>{o(),s.close(),s.emit("error",new Error("timeout"))},r);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(o),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ue(e,"ping",this.onping.bind(this)),ue(e,"data",this.ondata.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this)),ue(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch{this.onclose("parse error")}}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n||(n=new qs(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,s){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oe={};function Ge(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=fo(t,e.path||"/socket.io"),n=s.source,o=s.id,i=s.path,r=Oe[o]&&i in Oe[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||r;let h;return a?h=new ft(n,e):(Oe[o]||(Oe[o]=new ft(n,e)),h=Oe[o]),s.query&&!e.query&&(e.query=s.queryKey),h.socket(s.path,e)}Object.assign(Ge,{Manager:ft,Socket:qs,io:Ge,connect:Ge});const{window:xo}=He;function Co(t){var b,g,w,C,x;let e,s,n,o,i,r,a,h,f,c,p,k;return e=new Ws({props:{socket:t[16],chatChannelData:t[4]?(b=t[3])!=null?b:[]:(w=(g=t[2])==null?void 0:g.categories)!=null?w:[],currentServer:t[2],meInfo:t[6]}}),n=new $s({props:{chatChannelData:t[4]?t[11]:(C=t[8])!=null?C:{}}}),n.$on("click",t[18]),i=new dn({props:{meInfo:t[6],socket:t[16],serverData:t[1],currentServer:t[4]?[]:t[2]}}),a=new bn({props:{meInfo:t[6],socket:t[16]}}),f=new qn({props:{socket:t[16],currentServer:t[2],usersData:t[4]&&t[11]?[t[6],t[11]]:t[7]&&t[9]?t[7]:[],meInfo:t[6],sideMenuOn:t[5],chatsData:t[4]?(x=t[10])!=null?x:[]:t[7]&&t[9]?t[9]:[]}}),p=new En({props:{socket:t[16],currentCategory:t[0]}}),{c(){Le(e.$$.fragment),s=S(),Le(n.$$.fragment),o=S(),Le(i.$$.fragment),r=S(),Le(a.$$.fragment),h=S(),Le(f.$$.fragment),c=S(),Le(p.$$.fragment)},m(u,y){ye(e,u,y),E(u,s,y),ye(n,u,y),E(u,o,y),ye(i,u,y),E(u,r,y),ye(a,u,y),E(u,h,y),ye(f,u,y),E(u,c,y),ye(p,u,y),k=!0},p(u,y){var v,A,N,L,J;const m={};y&28&&(m.chatChannelData=u[4]?(v=u[3])!=null?v:[]:(N=(A=u[2])==null?void 0:A.categories)!=null?N:[]),y&4&&(m.currentServer=u[2]),y&64&&(m.meInfo=u[6]),e.$set(m);const q={};y&2320&&(q.chatChannelData=u[4]?u[11]:(L=u[8])!=null?L:{}),n.$set(q);const D={};y&64&&(D.meInfo=u[6]),y&2&&(D.serverData=u[1]),y&20&&(D.currentServer=u[4]?[]:u[2]),i.$set(D);const B={};y&64&&(B.meInfo=u[6]),a.$set(B);const T={};y&4&&(T.currentServer=u[2]),y&2768&&(T.usersData=u[4]&&u[11]?[u[6],u[11]]:u[7]&&u[9]?u[7]:[]),y&64&&(T.meInfo=u[6]),y&32&&(T.sideMenuOn=u[5]),y&1680&&(T.chatsData=u[4]?(J=u[10])!=null?J:[]:u[7]&&u[9]?u[9]:[]),f.$set(T);const M={};y&1&&(M.currentCategory=u[0]),p.$set(M)},i(u){k||(de(e.$$.fragment,u),de(n.$$.fragment,u),de(i.$$.fragment,u),de(a.$$.fragment,u),de(f.$$.fragment,u),de(p.$$.fragment,u),k=!0)},o(u){pe(e.$$.fragment,u),pe(n.$$.fragment,u),pe(i.$$.fragment,u),pe(a.$$.fragment,u),pe(f.$$.fragment,u),pe(p.$$.fragment,u),k=!1},d(u){_e(e,u),u&&I(s),_e(n,u),u&&I(o),_e(i,u),u&&I(r),_e(a,u),u&&I(h),_e(f,u),u&&I(c),_e(p,u)}}}function Io(t){let e,s;return e=new An({props:{socket:t[16]}}),{c(){Le(e.$$.fragment)},m(n,o){ye(e,n,o),s=!0},p:Y,i(n){s||(de(e.$$.fragment,n),s=!0)},o(n){pe(e.$$.fragment,n),s=!1},d(n){_e(e,n)}}}function fs(t){var u,y;let e,s,n,o,i,r=((u=t[14])==null?void 0:u.code)+"",a,h,f,c,p=((y=t[14])==null?void 0:y.message)+"",k,b,g;const w=[Io,Co],C=[];function x(m,q){return["#/sign-in","#/sign-up"].includes(location.hash)?0:1}return e=x(),s=C[e]=w[e](t),{c(){s.c(),n=S(),o=_("div"),i=_("b"),a=W(r),h=W(" Error"),f=S(),c=_("p"),k=W(p),l(i,"class","svelte-1ke3x51"),l(c,"class","svelte-1ke3x51"),l(o,"class","error svelte-1ke3x51"),z(o,"right",(t[13]?"30":-t[15]-10)+"px"),Qe(()=>t[19].call(o))},m(m,q){C[e].m(m,q),E(m,n,q),E(m,o,q),d(o,i),d(i,a),d(i,h),d(o,f),d(o,c),d(c,k),b=Bs(o,t[19].bind(o)),g=!0},p(m,q){var D,B;s.p(m,q),(!g||q&16384)&&r!==(r=((D=m[14])==null?void 0:D.code)+"")&&ee(a,r),(!g||q&16384)&&p!==(p=((B=m[14])==null?void 0:B.message)+"")&&ee(k,p),(!g||q&40960)&&z(o,"right",(m[13]?"30":-m[15]-10)+"px")},i(m){g||(de(s),g=!0)},o(m){pe(s),g=!1},d(m){C[e].d(m),m&&I(n),m&&I(o),b()}}}function qo(t){let e,s,n,o,i=t[12],r,a,h,f=fs(t);return{c(){e=_("link"),s=_("style"),s.textContent=`*{\r
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;\r
            font-variation-settings: 'wght' 400;\r
        }\r
        b{\r
            font-variation-settings: 'wght' 650;\r
        }`,n=S(),o=_("div"),f.c(),l(e,"rel","stylesheet"),l(e,"as","style"),l(e,"crossorigin","true"),l(e,"href","https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/variable/pretendardvariable-dynamic-subset.css"),l(e,"class","svelte-1ke3x51"),l(s,"class","svelte-1ke3x51"),l(o,"class","display svelte-1ke3x51")},m(c,p){d(document.head,e),d(document.head,s),E(c,n,p),E(c,o,p),f.m(o,null),r=!0,a||(h=O(xo,"hashchange",t[17]),a=!0)},p(c,[p]){p&4096&&le(i,i=c[12])?(Ns(),pe(f,1,1,Y),Rs(),f=fs(c),f.c(),de(f,1),f.m(o,null)):f.p(c,p)},i(c){r||(de(f),r=!0)},o(c){pe(f),r=!1},d(c){I(e),I(s),c&&I(n),c&&I(o),f.d(c),a=!1,h()}}}function Lo(t,e,s){let n,o=[],i=!1,r=0,a={profile:"",name:"",description:"",multiProfiles:""},h=[],f,c,p=[],k=[],b=[],g,w,C=!1,x=!1,u,y,m=Ge("https://api.makalong.kro.kr:3000");const q=()=>{B()},D=()=>{if(window.localStorage.getItem("token")||(location.hash="#/sign-in"),["#/sign-in","#/sign-up"].includes(location.hash))return s(12,C=!0);window.localStorage.getItem("token")&&m.emit("login",{token:window.localStorage.getItem("token")})},B=()=>{var v;if(["#/sign-in","#/sign-up"].includes(location.hash))return s(12,C=!0);if(C&&m.emit("login",{token:window.localStorage.getItem("token")}),s(12,C=!1),location.hash.startsWith("#invite/")&&m.emit("inviteServer",{inviteCode:location.hash.replace("#invite/",""),token:window.localStorage.getItem("token")}),location.hash.replace("#/","").split("/").filter(A=>A).length==2){if(location.hash.replace("#/","").split("/")[0]=="DM"){location.hash.replace("#/","").split("/")[1]!="main"&&(s(11,w=k==null?void 0:k.find(A=>A.userId==Number(location.hash.replace("#/","").split("/")[1]))),w?m.emit("getDMChat",{userId:Number(location.hash.replace("#/","").split("/")[1]),token:window.localStorage.getItem("token")}):location.hash="#/DM/main"),s(10,b=[]),s(4,g=!0);return}else s(4,g=!1);if(s(2,c=o.find(A=>A.serverId==location.hash.replace("#/","").split("/")[0])),c&&(s(0,n=c.categories.find(A=>A.channels.map(N=>N.channelId).includes(Number(location.hash.replace("#/","").split("/")[1])))),s(8,f=(v=n==null?void 0:n.channels)==null?void 0:v.find(A=>A.channelId==location.hash.replace("#/","").split("/")[1])),m.emit("getMember",{serverId:c.serverId,token:window.localStorage.getItem("token")}),n||!n&&!f)){f?m.emit("getChat",{serverId:c.serverId,categoryId:n.categoryId,channelId:f.channelId,token:window.localStorage.getItem("token")}):(location.hash=`#/${location.hash.replace("#/","").split("/")[0]}/main`,m.emit("setServer",{serverId:c.serverId,token:window.localStorage.getItem("token")}));return}}location.hash="#/DM/main",s(4,g=!0)};m.on("getData",v=>{v.servers&&(s(1,o=v.servers),r+=1),v.me&&(s(6,a=v.me),r+=1),r==2&&B()}),m.on("login",v=>{v.stat==200?(m.emit("getData",{type:"me",token:window.localStorage.getItem("token")}),m.emit("getData",{type:"servers",token:window.localStorage.getItem("token")}),m.emit("DM",{token:window.localStorage.getItem("token")})):(window.localStorage.removeItem("token"),location.hash="#/sign-in")}),m.on("getChat",v=>{s(9,p=v)}),m.on("getMember",v=>{s(7,h=v)}),m.on("chat",v=>{s(9,p=[...p,v])}),m.on("getDMChat",v=>{s(10,b=v)}),m.on("DM",v=>{s(3,k=v)}),m.on("DMChat",v=>{location.hash.replace("#/","").split("/")[0]=="DM"&&s(10,b=[...b,v])}),m.on("openDM",v=>{s(3,k=[...k,v])}),m.on("openedDM",v=>{location.hash=`#/DM/${v}`}),m.on("userDataEdit",v=>{s(6,a.profile=v.profile,a),s(6,a.description=v.description,a),s(6,a.name=v.name,a),s(7,h=h.map(A=>A=A.userId==v.userId?v:A))}),m.on("createServer",v=>{s(1,o=[...o,v]),location.hash=`#/${v.serverId}/${v.categories[0].channels[0].channelId}`}),m.on("inviteServer",v=>{s(1,o=[...o,v]),location.hash=`#/${v.serverId}/${v.categories[0].channels[0].channelId}`}),m.on("serverUpdated",async v=>{var A;s(1,o=o.map(N=>N=N.serverId==v.serverId?v:N)),s(8,f=await((A=n==null?void 0:n.channels)==null?void 0:A.find(N=>N.channelId==location.hash.replace("#/","").split("/")[1]))),f||(location.hash=`#/${location.hash.replace("#/","").split("/")[0]}/main`)}),m.on("memberUpdated",v=>{s(7,h=v)}),m.on("deleteServer",v=>{s(1,o=o.filter(A=>A.serverId!=v.serverId)),location.hash="#/DM/main"}),m.on("leaveServer",v=>{s(1,o=o.filter(A=>A.serverId!=v.serverId)),location.hash="#/DM/main"}),m.on("DMUserUpdated",v=>{s(3,k=k.map(A=>A=A.userId==v[0].userId?v[0]:A))}),m.on("error",v=>{s(14,u=v),s(13,x=!0),setTimeout(()=>s(13,x=!1),4e3)}),D();const T=()=>s(5,i=!i);function M(){y=this.clientWidth,s(15,y)}return t.$$.update=()=>{var v,A;t.$$.dirty&31&&(s(11,w=g?k==null?void 0:k.find(N=>N.userId==Number(location.hash.replace("#/","").split("/")[1])):void 0),s(2,c=o==null?void 0:o.find(N=>N.serverId==location.hash.replace("#/","").split("/")[0])),s(0,n=(v=c==null?void 0:c.categories)==null?void 0:v.find(N=>N.channels.map(L=>L.channelId).includes(Number(location.hash.replace("#/","").split("/")[1])))),s(8,f=(A=n==null?void 0:n.channels)==null?void 0:A.find(N=>N.channelId==location.hash.replace("#/","").split("/")[1])))},[n,o,c,k,g,i,a,h,f,p,b,w,C,x,u,y,m,q,T,M]}class jo extends xe{constructor(e){super(),we(this,e,Lo,qo,le,{})}}function Eo(t){let e,s,n,o;return n=new jo({}),{c(){e=_("style"),e.textContent=`*{
        margin: 0;
        padding: 0;
    }
    body{
        overflow: hidden;
    }`,s=S(),Le(n.$$.fragment)},m(i,r){d(document.head,e),E(i,s,r),ye(n,i,r),o=!0},p:Y,i(i){o||(de(n.$$.fragment,i),o=!0)},o(i){pe(n.$$.fragment,i),o=!1},d(i){I(e),i&&I(s),_e(n,i)}}}class So extends xe{constructor(e){super(),we(this,e,null,Eo,le,{})}}new So({target:document.getElementById("app")});
